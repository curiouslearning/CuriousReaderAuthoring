!function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t,r){"use strict";e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){"use strict";r(2);var n=r(3),i=function(e){return e&&e.__esModule?e:{default:e}}(n);H5P=H5P||{},H5PEditor.widgets.waveformInit=H5PEditor.WaveformInit=i.default},function(e,t){},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(4),a=n(i),s=r(6),o=r(7),u=n(o),l=r(8),c=n(l),h=r(9),d=n(h),f=function(e,t,r,n){var i=this;this.parent=e,this.field=t,this.params=r,this.setValue=n,this.id=null,this.crAudioIndex=0,this.container,this.audioParams=this.parent.parent.parent.params.params,this.startTime=void 0!=this.parent.params.startDuration?this.parent.params.startDuration:0,this.endTime=void 0!=this.parent.params.endDuration?this.parent.params.endDuration:.2,this.audioDuration;var a=this;(0,s.jQuery)(document).ready(function(){e.children[1].$input[0].setAttribute("disabled",!0);var t=u.default.create({container:a.container[0],waveColor:"violet",progressColor:"purple",fillParent:!1,plugins:[c.default.create({showTime:!0,opacity:1,customShowTimeStyle:{"background-color":"#000",color:"#fff",padding:"23px","font-size":"10px"}}),d.default.create({regionsMinLength:.1,maxRegions:1,regions:[{start:a.startTime,end:a.endTime,loop:!1,color:"hsla(400, 100%, 30%, 0.5)"}],dragSelection:{slop:5}})]}),n=void 0;a.crAudioIndex=H5PEditor.renderableCommonFields["H5P.CRAudio 1.4"].fields.length;var o=H5PEditor.renderableCommonFields["H5P.CRAudio 1.4"].fields[0].parent.params.subContentId,l=a.audioParams.files?a.audioParams.files[0].path:void 0;if(void 0!=l&&void 0!=o){var h=H5P.getPath(l,o);s.jQuery.get(h).done(function(){setTimeout(function(){t.load(h)},1e3)}).fail(function(){var e=H5PEditor.contentId,r=H5P.getPath(l,e);setTimeout(function(){t.load(r)},1e3)})}if(t.on("ready",function(){n=Object.values(t.regions.list)[0];var e=a.parent.parent.parent.parent.cp.width+.25*a.parent.parent.parent.parent.cp.width;a.audioDuration=t.getDuration(),t.params.minPxPerSec=e/t.getDuration(),t.drawBuffer()}),(0,s.jQuery)(a.container).parent().parent().find(".field-name-startDuration").find("input").focusout(function(e){if(void 0!=n){var t=e.target.value;if(isNaN(t))(0,s.jQuery)(this).parent().find(".h5p-errors").append("<p>The entered value must be Number not alphabet</p>");else{parseFloat(t)>a.audioDuration&&(t=0);var i=parseFloat(t),o=n.end<=parseFloat(t)?parseFloat(t)+.2:n.end;r={start:i.toFixed(4),end:o.toFixed(4)},n.update(r)}}}),(0,s.jQuery)(a.container).parent().parent().find(".field-name-endDuration").find("input").focusout(function(e){if(void 0!=n){var t=e.target.value;if(isNaN(t))(0,s.jQuery)(this).parent().find(".h5p-errors").append("<p>The entered value must be Number not alphabet</p>");else{parseFloat(t)>a.audioDuration&&(t=a.audioDuration-.05);var i=parseFloat(t)<=n.start?0:n.start,o=parseFloat(t);r={start:i.toFixed(4),end:o.toFixed(4)},n.update(r)}}}),t.on("region-updated",function(e){i.start=e.start,i.end=e.end,i.$startinput=(0,s.jQuery)("#"+i.id).parent().parent().find(".field-name-startDuration").find("input"),i.$endinput=(0,s.jQuery)("#"+i.id).parent().parent().find(".field-name-endDuration").find("input"),i.$startinput.val(i.start.toFixed(4)),i.$endinput.val(i.end.toFixed(4)),i.setValue(i.findField("startDuration",i.parent.field.fields),""+i.start.toFixed(4)),i.setValue(i.findField("endDuration",i.parent.field.fields),""+i.end.toFixed(4))}),(0,s.jQuery)(a.container).parents(".h5p-craudio-editor").find(".h5p-add-file").first().parent().find("ul").on("DOMSubtreeModified",function(){var e=H5PEditor.renderableCommonFields["H5P.CRAudio 1.4"].fields[a.crAudioIndex-1].parent.params.subContentId,o=a.audioParams.files?a.audioParams.files[0].path:void 0;if(void 0!=o&&void 0!=e){var u=H5P.getPath(o,e);s.jQuery.get(u).done(function(){setTimeout(function(){t.load(u)},1e3)}).fail(function(){var e=H5PEditor.contentId,r=H5P.getPath(o,e);setTimeout(function(){t.load(r)},1e3)})}if(void 0!=n){var l=(0,s.jQuery)("#"+i.id).parent().parent().find(".field-name-startDuration").find("input"),c=(0,s.jQuery)("#"+i.id).parent().parent().find(".field-name-endDuration").find("input");l.val(0),c.val(.2),i.setValue(i.findField("startDuration",i.parent.field.fields),"0"),i.setValue(i.findField("endDuration",i.parent.field.fields),"0.2"),r={start:0,end:.2},n.update(r)}}),null!=i.id){var f=i.id+"playRegion",p=(0,s.jQuery)("<button id = "+f+' class = "playRegion">Play</button>');(0,s.jQuery)(a.container).parent("div").append(p),(0,s.jQuery)(p).on("click",function(){void 0!=n&&n.play()})}})};f.prototype=Object.create(a.default.prototype),f.prototype.constructor=f,f.prototype.appendTo=function(e){var t=this,r=ns.getNextFieldId(this.field),n=H5PEditor.createFieldMarkup(this.field,'<div class="waveform" id="'+r+'" class="h5p-color-picker">',r);t.$item=H5PEditor.$(n),this.setId(r),console.log(e.slideIndex);var i=void 0!=this.parent.params.text?this.parent.params.text:"";e.append('<h1 class="test"> Waveform</h1>');var a=e.append(this.getSentence(t.parent.parent.parent.parent.cp.slides,this.parent.parent.parent.params.params.currIndex,this.parent.params.text));t.$item.appendTo(e),console.log(t.parent.parent.parent.parent.cp.editor.currSlideIndex),t.container=t.$item.find("#"+this.id),(0,s.jQuery)(a).on("change",function(e){if((0,s.jQuery)("#"+e.target.id).is(":checked"))i=i+" "+e.target.value+" ",(0,s.jQuery)("#"+e.target.id).attr("checked",!0),this.$word=(0,s.jQuery)("#"+r).parent().parent().find(".field-name-text").find("input"),this.$word.val(i.trim().replace(/  +/g," ")),(0,s.jQuery)(this.$word).attr("checked",!0),t.setValue(t.findField("text",t.parent.field.fields),""+i.replace(/  +/g," "));else{(0,s.jQuery)("#"+e.target.id).attr("checked",!1);var n=i.replace(e.target.value,"");i=n,this.$word=(0,s.jQuery)("#"+r).parent().parent().find(".field-name-text").find("input"),t.setValue(t.findField("text",t.parent.field.fields),""+i.replace(/  +/g," ")),(0,s.jQuery)(this.$word).attr("checked",!1),this.$word.val(i.trim().replace(/  +/g," "))}}),t.setValue(t.findField("text",t.parent.field.fields),""+this.parent.params.text)},f.prototype.findField=function(e,t){for(var r=0;r<t.length;r++)if(t[r].name===e)return t[r]},f.prototype.setId=function(e){this.id=e},f.prototype.findField=function(e,t){for(var r=0;r<t.length;r++)if(t[r].name===e)return t[r]},f.prototype.validate=function(){},f.prototype.getSentence=function(e,t,r){var n=[],i=void 0!=r?r.split(" "):[];console.log(this.parent.parent.parent.params.params.currIndex);for(var a=0;a<e[t].elements.length;a++)if("H5P.AdvancedText"==e[t].elements[a].action.library.split(" ")[0]){var o="";n=(0,s.jQuery)(e[t].elements[a].action.params.text)[0].innerText.split(" ");for(var u=0;u<n.length;u++){var l=-1!==i.indexOf(n[u]);""!=n[u].replace(/  +/g," ")&&(o=l?o+'<label class="h5peditor-label id ='+this.id+u+'"><input id='+this.id+u+' type="checkbox" value="'+n[u]+'"checked>'+n[u]+"</label>":o+'<label class="h5peditor-label id ='+this.id+u+'"><input id='+this.id+u+' type="checkbox" value="'+n[u]+'">'+n[u]+"</label>")}}return o},f.prototype.remove=function(){},t.default=f},function(e,t,r){"use strict";function n(e,t){var r=this;a.call(r),r.children=[];var n=function(e){for(var t=e;t<r.children.length;t++)r.children[t].index=t};if(r.addChild=function(t,a){void 0===a&&(a=r.children.length);var s=new i(a,r);return a===r.children.length?r.children.push(s):(r.children.splice(a,0,s),n(a)),e.call(s,t),s},r.removeChild=function(e){r.children.splice(e,1),n(e)},r.moveChild=function(e,t){var i=r.children.splice(e,1)[0];r.children.splice(t,0,i),n(t<e?t:e)},t)for(var s=0;s<t.length;s++)r.addChild(t[s])}var i=r(5),a=H5P.EventDispatcher;n.prototype=Object.create(a.prototype),n.prototype.constructor=n,e.exports=n},function(e,t,r){"use strict";function n(e,t){var r=this;r.index=e,r.parent=t}e.exports=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.jQuery=H5P.jQuery,t.EventDispatcher=H5P.EventDispatcher,t.JoubelUI=H5P.JoubelUI},function(e,t,r){"use strict";(function(e){var r,n,i,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};/*!
 * wavesurfer.js 5.1.0 (2021-06-20)
 * https://wavesurfer-js.org
 * @license BSD-3-Clause
 */
!function(a,o){"object"===s(t)&&"object"===s(e)?e.exports=o():(n=[],r=o,void 0!==(i="function"==typeof r?r.apply(t,n):r)&&(e.exports=i))}(0,function(){return function(){function e(n){var i=r[n];if(void 0!==i)return i.exports;var a=r[n]={exports:{}};return t[n](a,a.exports,e),a.exports}var t={"./src/drawer.canvasentry.js":/*!***********************************!*\
          !*** ./src/drawer.canvasentry.js ***!
          \***********************************/
function(e,t,r){function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(/*! ./util/style */"./src/util/style.js")),u=n(r(/*! ./util/get-id */"./src/util/get-id.js")),l=function(){function e(){i(this,e),this.wave=null,this.waveCtx=null,this.progress=null,this.progressCtx=null,this.start=0,this.end=1,this.id=(0,u.default)(void 0!==this.constructor.name?this.constructor.name.toLowerCase()+"_":"canvasentry_"),this.canvasContextAttributes={}}return s(e,[{key:"initWave",value:function(e){this.wave=e,this.waveCtx=this.wave.getContext("2d",this.canvasContextAttributes)}},{key:"initProgress",value:function(e){this.progress=e,this.progressCtx=this.progress.getContext("2d",this.canvasContextAttributes)}},{key:"updateDimensions",value:function(e,t,r,n){this.start=this.wave.offsetLeft/t||0,this.end=this.start+e/t,this.wave.width=r,this.wave.height=n;var i={width:e+"px"};(0,o.default)(this.wave,i),this.hasProgressCanvas&&(this.progress.width=r,this.progress.height=n,(0,o.default)(this.progress,i))}},{key:"clearWave",value:function(){this.waveCtx.clearRect(0,0,this.waveCtx.canvas.width,this.waveCtx.canvas.height),this.hasProgressCanvas&&this.progressCtx.clearRect(0,0,this.progressCtx.canvas.width,this.progressCtx.canvas.height)}},{key:"setFillStyles",value:function(e,t){this.waveCtx.fillStyle=e,this.hasProgressCanvas&&(this.progressCtx.fillStyle=t)}},{key:"applyCanvasTransforms",value:function(e){e&&(this.waveCtx.setTransform(0,1,1,0,0,0),this.hasProgressCanvas&&this.progressCtx.setTransform(0,1,1,0,0,0))}},{key:"fillRects",value:function(e,t,r,n,i){this.fillRectToContext(this.waveCtx,e,t,r,n,i),this.hasProgressCanvas&&this.fillRectToContext(this.progressCtx,e,t,r,n,i)}},{key:"fillRectToContext",value:function(e,t,r,n,i,a){e&&(a?this.drawRoundedRect(e,t,r,n,i,a):e.fillRect(t,r,n,i))}},{key:"drawRoundedRect",value:function(e,t,r,n,i,a){0!==i&&(i<0&&(i*=-1,r-=i),e.beginPath(),e.moveTo(t+a,r),e.lineTo(t+n-a,r),e.quadraticCurveTo(t+n,r,t+n,r+a),e.lineTo(t+n,r+i-a),e.quadraticCurveTo(t+n,r+i,t+n-a,r+i),e.lineTo(t+a,r+i),e.quadraticCurveTo(t,r+i,t,r+i-a),e.lineTo(t,r+a),e.quadraticCurveTo(t,r,t+a,r),e.closePath(),e.fill())}},{key:"drawLines",value:function(e,t,r,n,i,a){this.drawLineToContext(this.waveCtx,e,t,r,n,i,a),this.hasProgressCanvas&&this.drawLineToContext(this.progressCtx,e,t,r,n,i,a)}},{key:"drawLineToContext",value:function(e,t,r,n,i,a,s){if(e){var o=t.length/2,u=Math.round(o*this.start),l=Math.round(o*this.end)+1,c=u,h=l,d=this.wave.width/(h-c-1),f=n+i,p=r/n;e.beginPath(),e.moveTo((c-u)*d,f),e.lineTo((c-u)*d,f-Math.round((t[2*c]||0)/p));var v,m,y;for(v=c;v<h;v++)m=t[2*v]||0,y=Math.round(m/p),e.lineTo((v-u)*d+this.halfPixel,f-y);var g=h-1;for(g;g>=c;g--)m=t[2*g+1]||0,y=Math.round(m/p),e.lineTo((g-u)*d+this.halfPixel,f-y);e.lineTo((c-u)*d,f-Math.round((t[2*c+1]||0)/p)),e.closePath(),e.fill()}}},{key:"destroy",value:function(){this.waveCtx=null,this.wave=null,this.progressCtx=null,this.progress=null}},{key:"getImage",value:function(e,t,r){var n=this;return"blob"===r?new Promise(function(r){n.wave.toBlob(r,e,t)}):"dataURL"===r?this.wave.toDataURL(e,t):void 0}}]),e}();t.default=l,e.exports=t.default},"./src/drawer.js":/*!***********************!*\
          !*** ./src/drawer.js ***!
          \***********************/
function(e,t,r){function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"===s(Symbol.iterator)?function(e){return void 0===e?"undefined":s(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":s(e)})(e)}function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=p();return function(){var r,n=v(e);if(t){var i=v(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return d(this,r)}}function d(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var m=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var a={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=s?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(a,o,u):a[o]=e[o]}return a.default=e,r&&r.set(e,a),a}(r(/*! ./util */"./src/util/index.js")),y=function(e){function t(e,n){var i;return a(this,t),i=r.call(this),i.container=m.withOrientation(e,n.vertical),i.params=n,i.width=0,i.height=n.height*i.params.pixelRatio,i.lastPos=0,i.wrapper=null,i}l(t,e);var r=h(t);return u(t,[{key:"style",value:function(e,t){return m.style(e,t)}},{key:"createWrapper",value:function(){this.wrapper=m.withOrientation(this.container.appendChild(document.createElement("wave")),this.params.vertical),this.style(this.wrapper,{display:"block",position:"relative",userSelect:"none",webkitUserSelect:"none",height:this.params.height+"px"}),(this.params.fillParent||this.params.scrollParent)&&this.style(this.wrapper,{width:"100%",overflowX:this.params.hideScrollbar?"hidden":"auto",overflowY:"hidden"}),this.setupWrapperEvents()}},{key:"handleEvent",value:function(e,t){!t&&e.preventDefault();var r,n=m.withOrientation(e.targetTouches?e.targetTouches[0]:e,this.params.vertical).clientX,i=this.wrapper.getBoundingClientRect(),a=this.width,s=this.getWidth(),o=this.getProgressPixels(i,n);return r=!this.params.fillParent&&a<s?o*(this.params.pixelRatio/a)||0:(o+this.wrapper.scrollLeft)/this.wrapper.scrollWidth||0,m.clamp(r,0,1)}},{key:"getProgressPixels",value:function(e,t){return this.params.rtl?e.right-t:t-e.left}},{key:"setupWrapperEvents",value:function(){var e=this;this.wrapper.addEventListener("click",function(t){var r=m.withOrientation(t,e.params.vertical),n=e.wrapper.offsetHeight-e.wrapper.clientHeight;if(0!==n){var i=e.wrapper.getBoundingClientRect();if(r.clientY>=i.bottom-n)return}e.params.interact&&e.fireEvent("click",t,e.handleEvent(t))}),this.wrapper.addEventListener("dblclick",function(t){e.params.interact&&e.fireEvent("dblclick",t,e.handleEvent(t))}),this.wrapper.addEventListener("scroll",function(t){return e.fireEvent("scroll",t)})}},{key:"drawPeaks",value:function(e,t,r,n){this.setWidth(t)||this.clearWave(),this.params.barWidth?this.drawBars(e,0,r,n):this.drawWave(e,0,r,n)}},{key:"resetScroll",value:function(){null!==this.wrapper&&(this.wrapper.scrollLeft=0)}},{key:"recenter",value:function(e){var t=this.wrapper.scrollWidth*e;this.recenterOnPosition(t,!0)}},{key:"recenterOnPosition",value:function(e,t){var r=this.wrapper.scrollLeft,n=~~(this.wrapper.clientWidth/2),i=this.wrapper.scrollWidth-this.wrapper.clientWidth,a=e-n,s=a-r;if(0!=i){if(!t&&-n<=s&&s<n){var o=this.params.autoCenterRate;o/=n,o*=i,s=Math.max(-o,Math.min(o,s)),a=r+s}a=Math.max(0,Math.min(i,a)),a!=r&&(this.wrapper.scrollLeft=a)}}},{key:"getScrollX",value:function(){var e=0;if(this.wrapper){var t=this.params.pixelRatio;if(e=Math.round(this.wrapper.scrollLeft*t),this.params.scrollParent){var r=~~(this.wrapper.scrollWidth*t-this.getWidth());e=Math.min(r,Math.max(0,e))}}return e}},{key:"getWidth",value:function(){return Math.round(this.container.clientWidth*this.params.pixelRatio)}},{key:"setWidth",value:function(e){if(this.width==e)return!1;if(this.width=e,this.params.fillParent||this.params.scrollParent)this.style(this.wrapper,{width:""});else{var t=~~(this.width/this.params.pixelRatio)+"px";this.style(this.wrapper,{width:t})}return this.updateSize(),!0}},{key:"setHeight",value:function(e){return e!=this.height&&(this.height=e,this.style(this.wrapper,{height:~~(this.height/this.params.pixelRatio)+"px"}),this.updateSize(),!0)}},{key:"progress",value:function(e){var t=1/this.params.pixelRatio,r=Math.round(e*this.width)*t;if(r<this.lastPos||r-this.lastPos>=t){if(this.lastPos=r,this.params.scrollParent&&this.params.autoCenter){var n=~~(this.wrapper.scrollWidth*e);this.recenterOnPosition(n,this.params.autoCenterImmediately)}this.updateProgress(r)}}},{key:"destroy",value:function(){this.unAll(),this.wrapper&&(this.wrapper.parentNode==this.container.domElement&&this.container.removeChild(this.wrapper.domElement),this.wrapper=null)}},{key:"updateCursor",value:function(){}},{key:"updateSize",value:function(){}},{key:"drawBars",value:function(e,t,r,n){}},{key:"drawWave",value:function(e,t,r,n){}},{key:"clearWave",value:function(){}},{key:"updateProgress",value:function(e){}}]),t}(m.Observer);t.default=y,e.exports=t.default},"./src/drawer.multicanvas.js":/*!***********************************!*\
          !*** ./src/drawer.multicanvas.js ***!
          \***********************************/
function(e,t,r){function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"===s(Symbol.iterator)?function(e){return void 0===e?"undefined":s(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":s(e)})(e)}function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),e}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=v();return function(){var r,n=m(e);if(t){var i=m(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return f(this,r)}}function f(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var y=a(r(/*! ./drawer */"./src/drawer.js")),g=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var a={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=s?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(a,o,u):a[o]=e[o]}return a.default=e,r&&r.set(e,a),a}(r(/*! ./util */"./src/util/index.js")),b=a(r(/*! ./drawer.canvasentry */"./src/drawer.canvasentry.js")),w=function(e){function t(e,n){var i;return o(this,t),i=r.call(this,e,n),i.maxCanvasWidth=n.maxCanvasWidth,i.maxCanvasElementWidth=Math.round(n.maxCanvasWidth/n.pixelRatio),i.hasProgressCanvas=n.waveColor!=n.progressColor,i.halfPixel=.5/n.pixelRatio,i.canvases=[],i.progressWave=null,i.EntryClass=b.default,i.canvasContextAttributes=n.drawingContextAttributes,i.overlap=2*Math.ceil(n.pixelRatio/2),i.barRadius=n.barRadius||0,i.vertical=n.vertical,i}c(t,e);var r=d(t);return l(t,[{key:"init",value:function(){this.createWrapper(),this.createElements()}},{key:"createElements",value:function(){this.progressWave=g.withOrientation(this.wrapper.appendChild(document.createElement("wave")),this.params.vertical),this.style(this.progressWave,{position:"absolute",zIndex:3,left:0,top:0,bottom:0,overflow:"hidden",width:"0",display:"none",boxSizing:"border-box",borderRightStyle:"solid",pointerEvents:"none"}),this.addCanvas(),this.updateCursor()}},{key:"updateCursor",value:function(){this.style(this.progressWave,{borderRightWidth:this.params.cursorWidth+"px",borderRightColor:this.params.cursorColor})}},{key:"updateSize",value:function(){for(var e=this,t=Math.round(this.width/this.params.pixelRatio),r=Math.ceil(t/(this.maxCanvasElementWidth+this.overlap));this.canvases.length<r;)this.addCanvas();for(;this.canvases.length>r;)this.removeCanvas();var n=this.maxCanvasWidth+this.overlap,i=this.canvases.length-1;this.canvases.forEach(function(t,r){r==i&&(n=e.width-e.maxCanvasWidth*i),e.updateDimensions(t,n,e.height),t.clearWave()})}},{key:"addCanvas",value:function(){var e=new this.EntryClass;e.canvasContextAttributes=this.canvasContextAttributes,e.hasProgressCanvas=this.hasProgressCanvas,e.halfPixel=this.halfPixel;var t=this.maxCanvasElementWidth*this.canvases.length,r=g.withOrientation(this.wrapper.appendChild(document.createElement("canvas")),this.params.vertical);if(this.style(r,{position:"absolute",zIndex:2,left:t+"px",top:0,bottom:0,height:"100%",pointerEvents:"none"}),e.initWave(r),this.hasProgressCanvas){var n=g.withOrientation(this.progressWave.appendChild(document.createElement("canvas")),this.params.vertical);this.style(n,{position:"absolute",left:t+"px",top:0,bottom:0,height:"100%"}),e.initProgress(n)}this.canvases.push(e)}},{key:"removeCanvas",value:function(){var e=this.canvases[this.canvases.length-1];e.wave.parentElement.removeChild(e.wave.domElement),this.hasProgressCanvas&&e.progress.parentElement.removeChild(e.progress.domElement),e&&(e.destroy(),e=null),this.canvases.pop()}},{key:"updateDimensions",value:function(e,t,r){var n=Math.round(t/this.params.pixelRatio),i=Math.round(this.width/this.params.pixelRatio);e.updateDimensions(n,i,t,r),this.style(this.progressWave,{display:"block"})}},{key:"clearWave",value:function(){var e=this;g.frame(function(){e.canvases.forEach(function(e){return e.clearWave()})})()}},{key:"drawBars",value:function(e,t,r,n){var i=this;return this.prepareDraw(e,t,r,n,function(e){var t=e.absmax,a=e.hasMinVals,s=(e.height,e.offsetY),o=e.halfH,u=e.peaks,l=e.channelIndex;if(void 0!==r){var c=a?2:1,h=u.length/c,d=i.params.barWidth*i.params.pixelRatio,f=null===i.params.barGap?Math.max(i.params.pixelRatio,~~(d/2)):Math.max(i.params.pixelRatio,i.params.barGap*i.params.pixelRatio),p=d+f,v=h/i.width,m=r,y=n,g=m;for(g;g<y;g+=p){var b=u[Math.floor(g*v*c)]||0,w=Math.round(b/t*o);0==w&&i.params.barMinHeight&&(w=i.params.barMinHeight),i.fillRect(g+i.halfPixel,o-w+s,d+i.halfPixel,2*w,i.barRadius,l)}}})}},{key:"drawWave",value:function(e,t,r,n){var i=this;return this.prepareDraw(e,t,r,n,function(e){var t=e.absmax,a=e.hasMinVals,s=(e.height,e.offsetY),o=e.halfH,u=e.peaks,l=e.channelIndex;if(!a){var c=[],h=u.length,d=0;for(d;d<h;d++)c[2*d]=u[d],c[2*d+1]=-u[d];u=c}void 0!==r&&i.drawLine(u,t,o,s,r,n,l),i.fillRect(0,o+s-i.halfPixel,i.width,i.halfPixel,i.barRadius,l)})}},{key:"drawLine",value:function(e,t,r,n,i,a,s){var o=this,u=this.params.splitChannelsOptions.channelColors[s]||{},l=u.waveColor,c=u.progressColor;this.canvases.forEach(function(s,u){o.setFillStyles(s,l,c),o.applyCanvasTransforms(s,o.params.vertical),s.drawLines(e,t,r,n,i,a)})}},{key:"fillRect",value:function(e,t,r,n,i,a){var s=Math.floor(e/this.maxCanvasWidth),o=Math.min(Math.ceil((e+r)/this.maxCanvasWidth)+1,this.canvases.length),u=s;for(u;u<o;u++){var l=this.canvases[u],c=u*this.maxCanvasWidth,h={x1:Math.max(e,u*this.maxCanvasWidth),y1:t,x2:Math.min(e+r,u*this.maxCanvasWidth+l.wave.width),y2:t+n};if(h.x1<h.x2){var d=this.params.splitChannelsOptions.channelColors[a]||{},f=d.waveColor,p=d.progressColor;this.setFillStyles(l,f,p),this.applyCanvasTransforms(l,this.params.vertical),l.fillRects(h.x1-c,h.y1,h.x2-h.x1,h.y2-h.y1,i)}}}},{key:"hideChannel",value:function(e){return this.params.splitChannels&&this.params.splitChannelsOptions.filterChannels.includes(e)}},{key:"prepareDraw",value:function(e,t,r,n,i,a,s){var o=this;return g.frame(function(){if(e[0]instanceof Array){var u=e;if(o.params.splitChannels){var l=u.filter(function(e,t){return!o.hideChannel(t)});o.params.splitChannelsOptions.overlay||o.setHeight(Math.max(l.length,1)*o.params.height*o.params.pixelRatio);var c;return o.params.splitChannelsOptions&&o.params.splitChannelsOptions.relativeNormalization&&(c=g.max(u.map(function(e){return g.absMax(e)}))),u.forEach(function(e,t){return o.prepareDraw(e,t,r,n,i,l.indexOf(e),c)})}e=u[0]}if(!o.hideChannel(t)){var h=1/o.params.barHeight;o.params.normalize&&(h=void 0===s?g.absMax(e):s);var d=[].some.call(e,function(e){return e<0}),f=o.params.height*o.params.pixelRatio,p=f/2,v=f*a||0;return o.params.splitChannelsOptions&&o.params.splitChannelsOptions.overlay&&(v=0),i({absmax:h,hasMinVals:d,height:f,offsetY:v,halfH:p,peaks:e,channelIndex:t})}})()}},{key:"setFillStyles",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.params.waveColor,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.params.progressColor;e.setFillStyles(t,r)}},{key:"applyCanvasTransforms",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.applyCanvasTransforms(t)}},{key:"getImage",value:function(e,t,r){if("blob"===r)return Promise.all(this.canvases.map(function(n){return n.getImage(e,t,r)}));if("dataURL"===r){var n=this.canvases.map(function(n){return n.getImage(e,t,r)});return n.length>1?n:n[0]}}},{key:"updateProgress",value:function(e){this.style(this.progressWave,{width:e+"px"})}}]),t}(y.default);t.default=w,e.exports=t.default},"./src/mediaelement-webaudio.js":/*!**************************************!*\
          !*** ./src/mediaelement-webaudio.js ***!
          \**************************************/
function(e,t,r){function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"===s(Symbol.iterator)?function(e){return void 0===e?"undefined":s(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":s(e)})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}function u(e,t,r){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=l(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function l(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=v();return function(){var r,n=m(e);if(t){var i=m(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return f(this,r)}}function f(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var y=function(e){return e&&e.__esModule?e:{default:e}}(r(/*! ./mediaelement */"./src/mediaelement.js")),g=function(e){function t(e){var n;return i(this,t),n=r.call(this,e),n.params=e,n.sourceMediaElement=null,n}c(t,e);var r=d(t);return o(t,[{key:"init",value:function(){this.setPlaybackRate(this.params.audioRate),this.createTimer(),this.createVolumeNode(),this.createScriptNode(),this.createAnalyserNode()}},{key:"_load",value:function(e,r,n){u(m(t.prototype),"_load",this).call(this,e,r,n),this.createMediaElementSource(e)}},{key:"createMediaElementSource",value:function(e){this.sourceMediaElement=this.ac.createMediaElementSource(e),this.sourceMediaElement.connect(this.analyser)}},{key:"play",value:function(e,r){return this.resumeAudioContext(),u(m(t.prototype),"play",this).call(this,e,r)}},{key:"destroy",value:function(){u(m(t.prototype),"destroy",this).call(this),this.destroyWebAudio()}}]),t}(y.default);t.default=g,e.exports=t.default},"./src/mediaelement.js":/*!*****************************!*\
          !*** ./src/mediaelement.js ***!
          \*****************************/
function(e,t,r){function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"===s(Symbol.iterator)?function(e){return void 0===e?"undefined":s(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":s(e)})(e)}function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function l(e,t,r){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=c(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function c(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=m();return function(){var r,n=y(e);if(t){var i=y(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return p(this,r)}}function p(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var g=function(e){return e&&e.__esModule?e:{default:e}}(r(/*! ./webaudio */"./src/webaudio.js")),b=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var a={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=s?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(a,o,u):a[o]=e[o]}return a.default=e,r&&r.set(e,a),a}(r(/*! ./util */"./src/util/index.js")),w=function(e){function t(e){var n;return a(this,t),n=r.call(this,e),n.params=e,n.media={currentTime:0,duration:0,paused:!0,playbackRate:1,play:function(){},pause:function(){},volume:0},n.mediaType=e.mediaType.toLowerCase(),n.elementPosition=e.elementPosition,n.peaks=null,n.playbackRate=1,n.volume=1,n.isMuted=!1,n.buffer=null,n.onPlayEnd=null,n.mediaListeners={},n}h(t,e);var r=f(t);return u(t,[{key:"init",value:function(){this.setPlaybackRate(this.params.audioRate),this.createTimer()}},{key:"_setupMediaListeners",value:function(){var e=this;this.mediaListeners.error=function(){e.fireEvent("error","Error loading media element")},this.mediaListeners.canplay=function(){e.fireEvent("canplay")},this.mediaListeners.ended=function(){e.fireEvent("finish")},this.mediaListeners.play=function(){e.fireEvent("play")},this.mediaListeners.pause=function(){e.fireEvent("pause")},this.mediaListeners.seeked=function(t){e.fireEvent("seek")},this.mediaListeners.volumechange=function(t){e.isMuted=e.media.muted,e.isMuted?e.volume=0:e.volume=e.media.volume,e.fireEvent("volume")},Object.keys(this.mediaListeners).forEach(function(t){e.media.removeEventListener(t,e.mediaListeners[t]),e.media.addEventListener(t,e.mediaListeners[t])})}},{key:"createTimer",value:function(){var e=this,t=function t(){e.isPaused()||(e.fireEvent("audioprocess",e.getCurrentTime()),b.frame(t)())};this.on("play",t),this.on("pause",function(){e.fireEvent("audioprocess",e.getCurrentTime())})}},{key:"load",value:function(e,t,r,n){var i=document.createElement(this.mediaType);i.controls=this.params.mediaControls,i.autoplay=this.params.autoplay||!1,i.preload=null==n?"auto":n,i.src=e,i.style.width="100%";var a=t.querySelector(this.mediaType);a&&t.removeChild(a),t.appendChild(i),this._load(i,r,n)}},{key:"loadElt",value:function(e,t){e.controls=this.params.mediaControls,e.autoplay=this.params.autoplay||!1,this._load(e,t,e.preload)}},{key:"_load",value:function(e,t,r){if(!(e instanceof HTMLMediaElement)||void 0===e.addEventListener)throw new Error("media parameter is not a valid media element");"function"!=typeof e.load||t&&"none"==r||e.load(),this.media=e,this._setupMediaListeners(),this.peaks=t,this.onPlayEnd=null,this.buffer=null,this.isMuted=e.muted,this.setPlaybackRate(this.playbackRate),this.setVolume(this.volume)}},{key:"isPaused",value:function(){return!this.media||this.media.paused}},{key:"getDuration",value:function(){if(this.explicitDuration)return this.explicitDuration;var e=(this.buffer||this.media).duration;return e>=1/0&&(e=this.media.seekable.end(0)),e}},{key:"getCurrentTime",value:function(){return this.media&&this.media.currentTime}},{key:"getPlayedPercents",value:function(){return this.getCurrentTime()/this.getDuration()||0}},{key:"getPlaybackRate",value:function(){return this.playbackRate||this.media.playbackRate}},{key:"setPlaybackRate",value:function(e){this.playbackRate=e||1,this.media.playbackRate=this.playbackRate}},{key:"seekTo",value:function(e){null!=e&&(this.media.currentTime=e),this.clearPlayEnd()}},{key:"play",value:function(e,t){this.seekTo(e);var r=this.media.play();return t&&this.setPlayEnd(t),r}},{key:"pause",value:function(){var e;return this.media&&(e=this.media.pause()),this.clearPlayEnd(),e}},{key:"setPlayEnd",value:function(e){var t=this;this.clearPlayEnd(),this._onPlayEnd=function(r){r>=e&&(t.pause(),t.seekTo(e))},this.on("audioprocess",this._onPlayEnd)}},{key:"clearPlayEnd",value:function(){this._onPlayEnd&&(this.un("audioprocess",this._onPlayEnd),this._onPlayEnd=null)}},{key:"getPeaks",value:function(e,r,n){return this.buffer?l(y(t.prototype),"getPeaks",this).call(this,e,r,n):this.peaks||[]}},{key:"setSinkId",value:function(e){return e?this.media.setSinkId?this.media.setSinkId(e):Promise.reject(new Error("setSinkId is not supported in your browser")):Promise.reject(new Error("Invalid deviceId: "+e))}},{key:"getVolume",value:function(){return this.volume}},{key:"setVolume",value:function(e){this.volume=e,this.media.volume!==this.volume&&(this.media.volume=this.volume)}},{key:"setMute",value:function(e){this.isMuted=this.media.muted=e}},{key:"destroy",value:function(){var e=this;this.pause(),this.unAll(),this.destroyed=!0,Object.keys(this.mediaListeners).forEach(function(t){e.media&&e.media.removeEventListener(t,e.mediaListeners[t])}),this.params.removeMediaElementOnDestroy&&this.media&&this.media.parentNode&&this.media.parentNode.removeChild(this.media),this.media=null}}]),t}(g.default);t.default=w,e.exports=t.default},"./src/peakcache.js":/*!**************************!*\
          !*** ./src/peakcache.js ***!
          \**************************/
function(e,t){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(){function e(){r(this,e),this.clearPeakCache()}return i(e,[{key:"clearPeakCache",value:function(){this.peakCacheRanges=[],this.peakCacheLength=-1}},{key:"addRangeToPeakCache",value:function(e,t,r){e!=this.peakCacheLength&&(this.clearPeakCache(),this.peakCacheLength=e);for(var n=[],i=0;i<this.peakCacheRanges.length&&this.peakCacheRanges[i]<t;)i++;for(i%2==0&&n.push(t);i<this.peakCacheRanges.length&&this.peakCacheRanges[i]<=r;)n.push(this.peakCacheRanges[i]),i++;i%2==0&&n.push(r),n=n.filter(function(e,t,r){return 0==t?e!=r[t+1]:t==r.length-1?e!=r[t-1]:e!=r[t-1]&&e!=r[t+1]}),this.peakCacheRanges=this.peakCacheRanges.concat(n),this.peakCacheRanges=this.peakCacheRanges.sort(function(e,t){return e-t}).filter(function(e,t,r){return 0==t?e!=r[t+1]:t==r.length-1?e!=r[t-1]:e!=r[t-1]&&e!=r[t+1]});var a=[];for(i=0;i<n.length;i+=2)a.push([n[i],n[i+1]]);return a}},{key:"getCacheRanges",value:function(){var e,t=[];for(e=0;e<this.peakCacheRanges.length;e+=2)t.push([this.peakCacheRanges[e],this.peakCacheRanges[e+1]]);return t}}]),e}();t.default=a,e.exports=t.default},"./src/util/absMax.js":/*!****************************!*\
          !*** ./src/util/absMax.js ***!
          \****************************/
function(e,t,r){function n(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=(0,a.default)(e),r=(0,s.default)(e);return-r>t?-r:t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n(r(/*! ./max */"./src/util/max.js")),s=n(r(/*! ./min */"./src/util/min.js"));e.exports=t.default},"./src/util/clamp.js":/*!***************************!*\
          !*** ./src/util/clamp.js ***!
          \***************************/
function(e,t){function r(e,t,r){return Math.min(Math.max(t,e),r)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,e.exports=t.default},"./src/util/fetch.js":/*!***************************!*\
          !*** ./src/util/fetch.js ***!
          \***************************/
function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function s(e){if(!e)throw new Error("fetch options missing");if(!e.url)throw new Error("fetch url missing");var t=new o.default,r=new Headers,n=new Request(e.url);t.controller=new AbortController,e&&e.requestHeaders&&e.requestHeaders.forEach(function(e){r.append(e.key,e.value)});var i=e.responseType||"json",a={method:e.method||"GET",headers:r,mode:e.mode||"cors",credentials:e.credentials||"same-origin",cache:e.cache||"default",redirect:e.redirect||"follow",referrer:e.referrer||"client",signal:t.controller.signal};return fetch(n,a).then(function(e){t.response=e;var r=!0;e.body||(r=!1);var n=e.headers.get("content-length");return null===n&&(r=!1),r?(t.onProgress=function(e){t.fireEvent("progress",e)},new Response(new ReadableStream(new u(t,n,e)),a)):e}).then(function(e){var t;if(e.ok)switch(i){case"arraybuffer":return e.arrayBuffer();case"json":return e.json();case"blob":return e.blob();case"text":return e.text();default:t="Unknown responseType: "+i}throw t||(t="HTTP error status: "+e.status),new Error(t)}).then(function(e){t.fireEvent("success",e)}).catch(function(e){t.fireEvent("error",e)}),t.fetchRequest=n,t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var o=function(e){return e&&e.__esModule?e:{default:e}}(r(/*! ./observer */"./src/util/observer.js")),u=function(){function e(t,r,i){n(this,e),this.instance=t,this.instance._reader=i.body.getReader(),this.total=parseInt(r,10),this.loaded=0}return a(e,[{key:"start",value:function(e){var t=this;!function r(){t.instance._reader.read().then(function(n){var i=n.done,a=n.value;if(i)return 0===t.total&&t.instance.onProgress.call(t.instance,{loaded:t.loaded,total:t.total,lengthComputable:!1}),void e.close();t.loaded+=a.byteLength,t.instance.onProgress.call(t.instance,{loaded:t.loaded,total:t.total,lengthComputable:!(0===t.total)}),e.enqueue(a),r()}).catch(function(t){e.error(t)})}()}}]),e}();e.exports=t.default},"./src/util/frame.js":/*!***************************!*\
          !*** ./src/util/frame.js ***!
          \***************************/
function(e,t,r){function n(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(0,i.default)(function(){return e.apply(void 0,r)})}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var i=function(e){return e&&e.__esModule?e:{default:e}}(r(/*! ./request-animation-frame */"./src/util/request-animation-frame.js"));e.exports=t.default},"./src/util/get-id.js":/*!****************************!*\
          !*** ./src/util/get-id.js ***!
          \****************************/
function(e,t){function r(e){return void 0===e&&(e="wavesurfer_"),e+Math.random().toString(32).substring(2)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,e.exports=t.default},"./src/util/index.js":/*!***************************!*\
          !*** ./src/util/index.js ***!
          \***************************/
function(e,t,r){function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getId",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"max",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"min",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"absMax",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"Observer",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"style",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"requestAnimationFrame",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"frame",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"debounce",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"preventClick",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"fetchFile",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"clamp",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(t,"withOrientation",{enumerable:!0,get:function(){return m.default}});var i=n(r(/*! ./get-id */"./src/util/get-id.js")),a=n(r(/*! ./max */"./src/util/max.js")),s=n(r(/*! ./min */"./src/util/min.js")),o=n(r(/*! ./absMax */"./src/util/absMax.js")),u=n(r(/*! ./observer */"./src/util/observer.js")),l=n(r(/*! ./style */"./src/util/style.js")),c=n(r(/*! ./request-animation-frame */"./src/util/request-animation-frame.js")),h=n(r(/*! ./frame */"./src/util/frame.js")),d=n(r(/*! debounce */"./node_modules/debounce/index.js")),f=n(r(/*! ./prevent-click */"./src/util/prevent-click.js")),p=n(r(/*! ./fetch */"./src/util/fetch.js")),v=n(r(/*! ./clamp */"./src/util/clamp.js")),m=n(r(/*! ./orientation */"./src/util/orientation.js"))},"./src/util/max.js":/*!*************************!*\
          !*** ./src/util/max.js ***!
          \*************************/
function(e,t){function r(e){var t=-1/0;return Object.keys(e).forEach(function(r){e[r]>t&&(t=e[r])}),t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,e.exports=t.default},"./src/util/min.js":/*!*************************!*\
          !*** ./src/util/min.js ***!
          \*************************/
function(e,t){function r(e){var t=Number(1/0);return Object.keys(e).forEach(function(r){e[r]<t&&(t=e[r])}),t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,e.exports=t.default},"./src/util/observer.js":/*!******************************!*\
          !*** ./src/util/observer.js ***!
          \******************************/
function(e,t){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(){function e(){r(this,e),this._disabledEventEmissions=[],this.handlers=null}return i(e,[{key:"on",value:function(e,t){var r=this;this.handlers||(this.handlers={});var n=this.handlers[e];return n||(n=this.handlers[e]=[]),n.push(t),{name:e,callback:t,un:function(e,t){return r.un(e,t)}}}},{key:"un",value:function(e,t){if(this.handlers){var r,n=this.handlers[e];if(n)if(t)for(r=n.length-1;r>=0;r--)n[r]==t&&n.splice(r,1);else n.length=0}}},{key:"unAll",value:function(){this.handlers=null}},{key:"once",value:function(e,t){var r=this,n=function n(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];t.apply(r,a),setTimeout(function(){r.un(e,n)},0)};return this.on(e,n)}},{key:"setDisabledEventEmissions",value:function(e){this._disabledEventEmissions=e}},{key:"_isDisabledEventEmission",value:function(e){return this._disabledEventEmissions&&this._disabledEventEmissions.includes(e)}},{key:"fireEvent",value:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(this.handlers&&!this._isDisabledEventEmission(e)){var i=this.handlers[e];i&&i.forEach(function(e){e.apply(void 0,r)})}}}]),e}();t.default=a,e.exports=t.default},"./src/util/orientation.js":/*!*********************************!*\
          !*** ./src/util/orientation.js ***!
          \*********************************/
function(e,t){function r(e,t){return Object.prototype.hasOwnProperty.call(i,e)&&t?i[e]:e}function n(e,t){return e[a]?e:new Proxy(e,{get:function(e,i,s){if(i===a)return!0;if("domElement"===i)return e;if("style"===i)return n(e.style,t);if("canvas"===i)return n(e.canvas,t);if("getBoundingClientRect"===i)return function(){return n(e.getBoundingClientRect.apply(e,arguments),t)};if("getContext"===i)return function(){return n(e.getContext.apply(e,arguments),t)};var o=e[r(i,t)];return"function"==typeof o?o.bind(e):o},set:function(e,n,i){return e[r(n,t)]=i,!0}})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var i={width:"height",height:"width",overflowX:"overflowY",overflowY:"overflowX",clientWidth:"clientHeight",clientHeight:"clientWidth",clientX:"clientY",clientY:"clientX",scrollWidth:"scrollHeight",scrollLeft:"scrollTop",offsetLeft:"offsetTop",offsetTop:"offsetLeft",offsetHeight:"offsetWidth",offsetWidth:"offsetHeight",left:"top",right:"bottom",top:"left",bottom:"right",borderRightStyle:"borderBottomStyle",borderRightWidth:"borderBottomWidth",borderRightColor:"borderBottomColor"},a=Symbol("isProxy");e.exports=t.default},"./src/util/prevent-click.js":/*!***********************************!*\
          !*** ./src/util/prevent-click.js ***!
          \***********************************/
function(e,t){function r(e){e.stopPropagation(),document.body.removeEventListener("click",r,!0)}function n(e){document.body.addEventListener("click",r,!0)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,e.exports=t.default},"./src/util/request-animation-frame.js":/*!*********************************************!*\
          !*** ./src/util/request-animation-frame.js ***!
          \*********************************************/
function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){return setTimeout(e,1e3/60)}).bind(window);t.default=r,e.exports=t.default},"./src/util/style.js":/*!***************************!*\
          !*** ./src/util/style.js ***!
          \***************************/
function(e,t){function r(e,t){return Object.keys(t).forEach(function(r){e.style[r]!==t[r]&&(e.style[r]=t[r])}),e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,e.exports=t.default},"./src/wavesurfer.js":/*!***************************!*\
          !*** ./src/wavesurfer.js ***!
          \***************************/
function(e,t,r){function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"===s(Symbol.iterator)?function(e){return void 0===e?"undefined":s(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":s(e)})(e)}function i(e){return e&&e.__esModule?e:{default:e}}function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=f();return function(){var r,n=p(e);if(t){var i=p(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h(this,r)}}function h(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t,r){return t&&m(e.prototype,t),r&&m(e,r),e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var g=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=a?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(i,s,u):i[s]=e[s]}return i.default=e,r&&r.set(e,i),i}(r(/*! ./util */"./src/util/index.js")),b=i(r(/*! ./drawer.multicanvas */"./src/drawer.multicanvas.js")),w=i(r(/*! ./webaudio */"./src/webaudio.js")),k=i(r(/*! ./mediaelement */"./src/mediaelement.js")),P=i(r(/*! ./peakcache */"./src/peakcache.js")),x=i(r(/*! ./mediaelement-webaudio */"./src/mediaelement-webaudio.js")),E=function(e){function t(e){var n;if(v(this,t),n=r.call(this),n.defaultParams={audioContext:null,audioScriptProcessor:null,audioRate:1,autoCenter:!0,autoCenterRate:5,autoCenterImmediately:!1,backend:"WebAudio",backgroundColor:null,barHeight:1,barRadius:0,barGap:null,barMinHeight:null,container:null,cursorColor:"#333",cursorWidth:1,dragSelection:!0,drawingContextAttributes:{desynchronized:!1},duration:null,fillParent:!0,forceDecode:!1,height:128,hideScrollbar:!1,interact:!0,loopSelection:!0,maxCanvasWidth:4e3,mediaContainer:null,mediaControls:!1,mediaType:"audio",minPxPerSec:20,normalize:!1,partialRender:!1,pixelRatio:window.devicePixelRatio||screen.deviceXDPI/screen.logicalXDPI,plugins:[],progressColor:"#555",removeMediaElementOnDestroy:!0,renderer:b.default,responsive:!1,rtl:!1,scrollParent:!1,skipLength:2,splitChannels:!1,splitChannelsOptions:{overlay:!1,channelColors:{},filterChannels:[],relativeNormalization:!1},vertical:!1,waveColor:"#999",xhr:{}},n.backends={MediaElement:k.default,WebAudio:w.default,MediaElementWebAudio:x.default},n.util=g,n.params=a({},n.defaultParams,e),n.params.splitChannelsOptions=a({},n.defaultParams.splitChannelsOptions,e.splitChannelsOptions),n.container="string"==typeof e.container?document.querySelector(n.params.container):n.params.container,!n.container)throw new Error("Container element not found");if(null==n.params.mediaContainer?n.mediaContainer=n.container:"string"==typeof n.params.mediaContainer?n.mediaContainer=document.querySelector(n.params.mediaContainer):n.mediaContainer=n.params.mediaContainer,!n.mediaContainer)throw new Error("Media Container element not found");if(n.params.maxCanvasWidth<=1)throw new Error("maxCanvasWidth must be greater than 1");if(n.params.maxCanvasWidth%2==1)throw new Error("maxCanvasWidth must be an even number");if(!0===n.params.rtl&&(!0===n.params.vertical?g.style(n.container,{transform:"rotateX(180deg)"}):g.style(n.container,{transform:"rotateY(180deg)"})),n.params.backgroundColor&&n.setBackgroundColor(n.params.backgroundColor),n.savedVolume=0,n.isMuted=!1,n.tmpEvents=[],n.currentRequest=null,n.arraybuffer=null,n.drawer=null,n.backend=null,n.peakCache=null,"function"!=typeof n.params.renderer)throw new Error("Renderer parameter is invalid");n.Drawer=n.params.renderer,"AudioElement"==n.params.backend&&(n.params.backend="MediaElement"),"WebAudio"!=n.params.backend&&"MediaElementWebAudio"!==n.params.backend||w.default.prototype.supportsWebAudio.call(null)||(n.params.backend="MediaElement"),n.Backend=n.backends[n.params.backend],n.initialisedPluginList={},n.isDestroyed=!1,n.isReady=!1;var i=0;return n._onResize=g.debounce(function(){i==n.drawer.wrapper.clientWidth||n.params.scrollParent||(i=n.drawer.wrapper.clientWidth,n.drawer.fireEvent("redraw"))},"number"==typeof n.params.responsive?n.params.responsive:100),h(n,d(n))}u(t,e);var r=c(t);return y(t,[{key:"init",value:function(){return this.registerPlugins(this.params.plugins),this.createDrawer(),this.createBackend(),this.createPeakCache(),this}},{key:"registerPlugins",value:function(e){var t=this;return e.forEach(function(e){return t.addPlugin(e)}),e.forEach(function(e){e.deferInit||t.initPlugin(e.name)}),this.fireEvent("plugins-registered",e),this}},{key:"getActivePlugins",value:function(){return this.initialisedPluginList}},{key:"addPlugin",value:function(e){var t=this;if(!e.name)throw new Error("Plugin does not have a name!");if(!e.instance)throw new Error("Plugin ".concat(e.name," does not have an instance property!"));e.staticProps&&Object.keys(e.staticProps).forEach(function(r){t[r]=e.staticProps[r]});var r=e.instance;return Object.getOwnPropertyNames(g.Observer.prototype).forEach(function(e){r.prototype[e]=g.Observer.prototype[e]}),this[e.name]=new r(e.params||{},this),this.fireEvent("plugin-added",e.name),this}},{key:"initPlugin",value:function(e){if(!this[e])throw new Error("Plugin ".concat(e," has not been added yet!"));return this.initialisedPluginList[e]&&this.destroyPlugin(e),this[e].init(),this.initialisedPluginList[e]=!0,this.fireEvent("plugin-initialised",e),this}},{key:"destroyPlugin",value:function(e){if(!this[e])throw new Error("Plugin ".concat(e," has not been added yet and cannot be destroyed!"));if(!this.initialisedPluginList[e])throw new Error("Plugin ".concat(e," is not active and cannot be destroyed!"));if("function"!=typeof this[e].destroy)throw new Error("Plugin ".concat(e," does not have a destroy function!"));return this[e].destroy(),delete this.initialisedPluginList[e],this.fireEvent("plugin-destroyed",e),this}},{key:"destroyAllPlugins",value:function(){var e=this;Object.keys(this.initialisedPluginList).forEach(function(t){return e.destroyPlugin(t)})}},{key:"createDrawer",value:function(){var e=this;this.drawer=new this.Drawer(this.container,this.params),this.drawer.init(),this.fireEvent("drawer-created",this.drawer),!1!==this.params.responsive&&(window.addEventListener("resize",this._onResize,!0),window.addEventListener("orientationchange",this._onResize,!0)),this.drawer.on("redraw",function(){e.drawBuffer(),e.drawer.progress(e.backend.getPlayedPercents())}),this.drawer.on("click",function(t,r){setTimeout(function(){return e.seekTo(r)},0)}),this.drawer.on("scroll",function(t){e.params.partialRender&&e.drawBuffer(),e.fireEvent("scroll",t)})}},{key:"createBackend",value:function(){var e=this;this.backend&&this.backend.destroy(),this.backend=new this.Backend(this.params),this.backend.init(),this.fireEvent("backend-created",this.backend),this.backend.on("finish",function(){e.drawer.progress(e.backend.getPlayedPercents()),e.fireEvent("finish")}),this.backend.on("play",function(){return e.fireEvent("play")}),this.backend.on("pause",function(){return e.fireEvent("pause")}),this.backend.on("audioprocess",function(t){e.drawer.progress(e.backend.getPlayedPercents()),e.fireEvent("audioprocess",t)}),"MediaElement"!==this.params.backend&&"MediaElementWebAudio"!==this.params.backend||(this.backend.on("seek",function(){e.drawer.progress(e.backend.getPlayedPercents())}),this.backend.on("volume",function(){var t=e.getVolume();e.fireEvent("volume",t),e.backend.isMuted!==e.isMuted&&(e.isMuted=e.backend.isMuted,e.fireEvent("mute",e.isMuted))}))}},{key:"createPeakCache",value:function(){this.params.partialRender&&(this.peakCache=new P.default)}},{key:"getDuration",value:function(){return this.backend.getDuration()}},{key:"getCurrentTime",value:function(){return this.backend.getCurrentTime()}},{key:"setCurrentTime",value:function(e){e>=this.getDuration()?this.seekTo(1):this.seekTo(e/this.getDuration())}},{key:"play",value:function(e,t){var r=this;return this.fireEvent("interaction",function(){return r.play(e,t)}),this.backend.play(e,t)}},{key:"setPlayEnd",value:function(e){this.backend.setPlayEnd(e)}},{key:"pause",value:function(){if(!this.backend.isPaused())return this.backend.pause()}},{key:"playPause",value:function(){return this.backend.isPaused()?this.play():this.pause()}},{key:"isPlaying",value:function(){return!this.backend.isPaused()}},{key:"skipBackward",value:function(e){this.skip(-e||-this.params.skipLength)}},{key:"skipForward",value:function(e){this.skip(e||this.params.skipLength)}},{key:"skip",value:function(e){var t=this.getDuration()||1,r=this.getCurrentTime()||0;r=Math.max(0,Math.min(t,r+(e||0))),this.seekAndCenter(r/t)}},{key:"seekAndCenter",value:function(e){this.seekTo(e),this.drawer.recenter(e)}},{key:"seekTo",value:function(e){var t=this;if("number"!=typeof e||!isFinite(e)||e<0||e>1)throw new Error("Error calling wavesurfer.seekTo, parameter must be a number between 0 and 1!");this.fireEvent("interaction",function(){return t.seekTo(e)});var r="WebAudio"===this.params.backend,n=this.backend.isPaused();r&&!n&&this.backend.pause();var i=this.params.scrollParent;this.params.scrollParent=!1,this.backend.seekTo(e*this.getDuration()),this.drawer.progress(e),r&&!n&&this.backend.play(),this.params.scrollParent=i,this.fireEvent("seek",e)}},{key:"stop",value:function(){this.pause(),this.seekTo(0),this.drawer.progress(0)}},{key:"setSinkId",value:function(e){return this.backend.setSinkId(e)}},{key:"setVolume",value:function(e){this.backend.setVolume(e),this.fireEvent("volume",e)}},{key:"getVolume",value:function(){return this.backend.getVolume()}},{key:"setPlaybackRate",value:function(e){this.backend.setPlaybackRate(e)}},{key:"getPlaybackRate",value:function(){return this.backend.getPlaybackRate()}},{key:"toggleMute",value:function(){this.setMute(!this.isMuted)}},{key:"setMute",value:function(e){if(e===this.isMuted)return void this.fireEvent("mute",this.isMuted);this.backend.setMute?(this.backend.setMute(e),this.isMuted=e):e?(this.savedVolume=this.backend.getVolume(),this.backend.setVolume(0),this.isMuted=!0,this.fireEvent("volume",0)):(this.backend.setVolume(this.savedVolume),this.isMuted=!1,this.fireEvent("volume",this.savedVolume)),this.fireEvent("mute",this.isMuted)}},{key:"getMute",value:function(){return this.isMuted}},{key:"getFilters",value:function(){return this.backend.filters||[]}},{key:"toggleScroll",value:function(){this.params.scrollParent=!this.params.scrollParent,this.drawBuffer()}},{key:"toggleInteraction",value:function(){this.params.interact=!this.params.interact}},{key:"getWaveColor",value:function(){return this.params.waveColor}},{key:"setWaveColor",value:function(e){this.params.waveColor=e,this.drawBuffer()}},{key:"getProgressColor",value:function(){return this.params.progressColor}},{key:"setProgressColor",value:function(e){this.params.progressColor=e,this.drawBuffer()}},{key:"getBackgroundColor",value:function(){return this.params.backgroundColor}},{key:"setBackgroundColor",value:function(e){this.params.backgroundColor=e,g.style(this.container,{background:this.params.backgroundColor})}},{key:"getCursorColor",value:function(){return this.params.cursorColor}},{key:"setCursorColor",value:function(e){this.params.cursorColor=e,this.drawer.updateCursor()}},{key:"getHeight",value:function(){return this.params.height}},{key:"setHeight",value:function(e){this.params.height=e,this.drawer.setHeight(e*this.params.pixelRatio),this.drawBuffer()}},{key:"setFilteredChannels",value:function(e){this.params.splitChannelsOptions.filterChannels=e,this.drawBuffer()}},{key:"drawBuffer",value:function(){var e=Math.round(this.getDuration()*this.params.minPxPerSec*this.params.pixelRatio),t=this.drawer.getWidth(),r=e,n=0,i=Math.max(n+t,r);this.params.fillParent&&(!this.params.scrollParent||e<t)&&(r=t,n=0,i=r);var a;if(this.params.partialRender){var s,o=this.peakCache.addRangeToPeakCache(r,n,i);for(s=0;s<o.length;s++)a=this.backend.getPeaks(r,o[s][0],o[s][1]),this.drawer.drawPeaks(a,r,o[s][0],o[s][1])}else a=this.backend.getPeaks(r,n,i),this.drawer.drawPeaks(a,r,n,i);this.fireEvent("redraw",a,r)}},{key:"zoom",value:function(e){e?(this.params.minPxPerSec=e,this.params.scrollParent=!0):(this.params.minPxPerSec=this.defaultParams.minPxPerSec,this.params.scrollParent=!1),this.drawBuffer(),this.drawer.progress(this.backend.getPlayedPercents()),this.drawer.recenter(this.getCurrentTime()/this.getDuration()),this.fireEvent("zoom",e)}},{key:"loadArrayBuffer",value:function(e){var t=this;this.decodeArrayBuffer(e,function(e){t.isDestroyed||t.loadDecodedBuffer(e)})}},{key:"loadDecodedBuffer",value:function(e){this.backend.load(e),this.drawBuffer(),this.isReady=!0,this.fireEvent("ready")}},{key:"loadBlob",value:function(e){var t=this,r=new FileReader;r.addEventListener("progress",function(e){return t.onProgress(e)}),r.addEventListener("load",function(e){return t.loadArrayBuffer(e.target.result)}),r.addEventListener("error",function(){return t.fireEvent("error","Error reading file")}),r.readAsArrayBuffer(e),this.empty()}},{key:"load",value:function(e,t,r,n){if(!e)throw new Error("url parameter cannot be empty");if(this.empty(),r){var i={"Preload is not 'auto', 'none' or 'metadata'":-1===["auto","metadata","none"].indexOf(r),"Peaks are not provided":!t,"Backend is not of type 'MediaElement' or 'MediaElementWebAudio'":-1===["MediaElement","MediaElementWebAudio"].indexOf(this.params.backend),"Url is not of type string":"string"!=typeof e},a=Object.keys(i).filter(function(e){return i[e]});a.length&&(console.warn("Preload parameter of wavesurfer.load will be ignored because:\n\t- "+a.join("\n\t- ")),r=null)}switch("WebAudio"===this.params.backend&&e instanceof HTMLMediaElement&&(e=e.src),this.params.backend){case"WebAudio":return this.loadBuffer(e,t,n);case"MediaElement":case"MediaElementWebAudio":return this.loadMediaElement(e,t,r,n)}}},{key:"loadBuffer",value:function(e,t,r){var n=this,i=function(t){return t&&n.tmpEvents.push(n.once("ready",t)),n.getArrayBuffer(e,function(e){return n.loadArrayBuffer(e)})};if(!t)return i();this.backend.setPeaks(t,r),this.drawBuffer(),this.fireEvent("waveform-ready"),this.tmpEvents.push(this.once("interaction",i))}},{key:"loadMediaElement",value:function(e,t,r,n){var i=this,a=e;if("string"==typeof e)this.backend.load(a,this.mediaContainer,t,r);else{var s=e;this.backend.loadElt(s,t),a=s.src}this.tmpEvents.push(this.backend.once("canplay",function(){i.backend.destroyed||(i.drawBuffer(),i.isReady=!0,i.fireEvent("ready"))}),this.backend.once("error",function(e){return i.fireEvent("error",e)})),t&&(this.backend.setPeaks(t,n),this.drawBuffer(),this.fireEvent("waveform-ready")),t&&!this.params.forceDecode||!this.backend.supportsWebAudio()||this.getArrayBuffer(a,function(e){i.decodeArrayBuffer(e,function(e){i.backend.buffer=e,i.backend.setPeaks(null),i.drawBuffer(),i.fireEvent("waveform-ready")})})}},{key:"decodeArrayBuffer",value:function(e,t){var r=this;this.arraybuffer=e,this.backend.decodeArrayBuffer(e,function(n){r.isDestroyed||r.arraybuffer!=e||(t(n),r.arraybuffer=null)},function(){return r.fireEvent("error","Error decoding audiobuffer")})}},{key:"getArrayBuffer",value:function(e,t){var r=this,n=a({url:e,responseType:"arraybuffer"},this.params.xhr),i=g.fetchFile(n);return this.currentRequest=i,this.tmpEvents.push(i.on("progress",function(e){r.onProgress(e)}),i.on("success",function(e){t(e),r.currentRequest=null}),i.on("error",function(e){r.fireEvent("error",e),r.currentRequest=null})),i}},{key:"onProgress",value:function(e){var t;t=e.lengthComputable?e.loaded/e.total:e.loaded/(e.loaded+1e6),this.fireEvent("loading",Math.round(100*t),e.target)}},{key:"exportPCM",value:function(e,t,r,n,i){e=e||1024,n=n||0,t=t||1e4,r=r||!1;var a=this.backend.getPeaks(e,n,i),s=[].map.call(a,function(e){return Math.round(e*t)/t});return new Promise(function(e,t){if(!r){var n=new Blob([JSON.stringify(s)],{type:"application/json;charset=utf-8"}),i=URL.createObjectURL(n);window.open(i),URL.revokeObjectURL(i)}e(s)})}},{key:"exportImage",value:function(e,t,r){return e||(e="image/png"),t||(t=1),r||(r="dataURL"),this.drawer.getImage(e,t,r)}},{key:"cancelAjax",value:function(){this.currentRequest&&this.currentRequest.controller&&(this.currentRequest._reader&&this.currentRequest._reader.cancel().catch(function(e){}),this.currentRequest.controller.abort(),this.currentRequest=null)}},{key:"clearTmpEvents",value:function(){this.tmpEvents.forEach(function(e){return e.un()})}},{key:"empty",value:function(){this.backend.isPaused()||(this.stop(),this.backend.disconnectSource()),this.isReady=!1,this.cancelAjax(),this.clearTmpEvents(),this.drawer.progress(0),this.drawer.setWidth(0),this.drawer.drawPeaks({length:this.drawer.getWidth()},0)}},{key:"destroy",value:function(){this.destroyAllPlugins(),this.fireEvent("destroy"),this.cancelAjax(),this.clearTmpEvents(),this.unAll(),!1!==this.params.responsive&&(window.removeEventListener("resize",this._onResize,!0),window.removeEventListener("orientationchange",this._onResize,!0)),this.backend&&(this.backend.destroy(),this.backend=null),this.drawer&&this.drawer.destroy(),this.isDestroyed=!0,this.isReady=!1,this.arraybuffer=null}}],[{key:"create",value:function(e){return new t(e).init()}}]),t}(g.Observer);t.default=E,E.VERSION="5.1.0",E.util=g,e.exports=t.default},"./src/webaudio.js":/*!*************************!*\
          !*** ./src/webaudio.js ***!
          \*************************/
function(e,t,r){function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"===s(Symbol.iterator)?function(e){return void 0===e?"undefined":s(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":s(e)})(e)}function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),e}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=v();return function(){var r,n=m(e);if(t){var i=m(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return f(this,r)}}function f(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var y=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var a={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=s?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(a,o,u):a[o]=e[o]}return a.default=e,r&&r.set(e,a),a}(r(/*! ./util */"./src/util/index.js")),g="playing",b="paused",w="finished",k=function(e){function t(e){var n,i,s;return o(this,t),s=r.call(this),s.audioContext=null,s.offlineAudioContext=null,s.stateBehaviors=(n={},a(n,g,{init:function(){this.addOnAudioProcess()},getPlayedPercents:function(){var e=this.getDuration();return this.getCurrentTime()/e||0},getCurrentTime:function(){return this.startPosition+this.getPlayedTime()}}),a(n,b,{init:function(){this.removeOnAudioProcess()},getPlayedPercents:function(){var e=this.getDuration();return this.getCurrentTime()/e||0},getCurrentTime:function(){return this.startPosition}}),a(n,w,{init:function(){this.removeOnAudioProcess(),this.fireEvent("finish")},getPlayedPercents:function(){return 1},getCurrentTime:function(){return this.getDuration()}}),n),s.params=e,s.ac=e.audioContext||(s.supportsWebAudio()?s.getAudioContext():{}),s.lastPlay=s.ac.currentTime,s.startPosition=0,s.scheduledPause=null,s.states=(i={},a(i,g,Object.create(s.stateBehaviors[g])),a(i,b,Object.create(s.stateBehaviors[b])),a(i,w,Object.create(s.stateBehaviors[w])),i),s.buffer=null,s.filters=[],s.gainNode=null,s.mergedPeaks=null,s.offlineAc=null,s.peaks=null,s.playbackRate=1,s.analyser=null,s.scriptNode=null,s.source=null,s.splitPeaks=[],s.state=null,s.explicitDuration=e.duration,s.destroyed=!1,s}c(t,e);var r=d(t);return l(t,[{key:"supportsWebAudio",value:function(){return!(!window.AudioContext&&!window.webkitAudioContext)}},{key:"getAudioContext",value:function(){return window.WaveSurferAudioContext||(window.WaveSurferAudioContext=new(window.AudioContext||window.webkitAudioContext)),window.WaveSurferAudioContext}},{key:"getOfflineAudioContext",value:function(e){return window.WaveSurferOfflineAudioContext||(window.WaveSurferOfflineAudioContext=new(window.OfflineAudioContext||window.webkitOfflineAudioContext)(1,2,e)),window.WaveSurferOfflineAudioContext}},{key:"init",value:function(){this.createVolumeNode(),this.createScriptNode(),this.createAnalyserNode(),this.setState(b),this.setPlaybackRate(this.params.audioRate),this.setLength(0)}},{key:"disconnectFilters",value:function(){this.filters&&(this.filters.forEach(function(e){e&&e.disconnect()}),this.filters=null,this.analyser.connect(this.gainNode))}},{key:"setState",value:function(e){this.state!==this.states[e]&&(this.state=this.states[e],this.state.init.call(this))}},{key:"setFilter",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.setFilters(t)}},{key:"setFilters",value:function(e){this.disconnectFilters(),e&&e.length&&(this.filters=e,this.analyser.disconnect(),e.reduce(function(e,t){return e.connect(t),t},this.analyser).connect(this.gainNode))}},{key:"createScriptNode",value:function(){this.params.audioScriptProcessor?this.scriptNode=this.params.audioScriptProcessor:this.ac.createScriptProcessor?this.scriptNode=this.ac.createScriptProcessor(t.scriptBufferSize):this.scriptNode=this.ac.createJavaScriptNode(t.scriptBufferSize),this.scriptNode.connect(this.ac.destination)}},{key:"addOnAudioProcess",value:function(){var e=this;this.scriptNode.onaudioprocess=function(){var t=e.getCurrentTime();t>=e.getDuration()?(e.setState(w),e.fireEvent("pause")):t>=e.scheduledPause?e.pause():e.state===e.states[g]&&e.fireEvent("audioprocess",t)}}},{key:"removeOnAudioProcess",value:function(){this.scriptNode.onaudioprocess=null}},{key:"createAnalyserNode",value:function(){this.analyser=this.ac.createAnalyser(),this.analyser.connect(this.gainNode)}},{key:"createVolumeNode",value:function(){this.ac.createGain?this.gainNode=this.ac.createGain():this.gainNode=this.ac.createGainNode(),this.gainNode.connect(this.ac.destination)}},{key:"setSinkId",value:function(e){if(e){var t=new window.Audio;if(!t.setSinkId)return Promise.reject(new Error("setSinkId is not supported in your browser"));t.autoplay=!0;var r=this.ac.createMediaStreamDestination();return this.gainNode.disconnect(),this.gainNode.connect(r),t.srcObject=r.stream,t.setSinkId(e)}return Promise.reject(new Error("Invalid deviceId: "+e))}},{key:"setVolume",value:function(e){this.gainNode.gain.setValueAtTime(e,this.ac.currentTime)}},{key:"getVolume",value:function(){return this.gainNode.gain.value}},{key:"decodeArrayBuffer",value:function(e,t,r){this.offlineAc||(this.offlineAc=this.getOfflineAudioContext(this.ac&&this.ac.sampleRate?this.ac.sampleRate:44100)),"webkitAudioContext"in window?this.offlineAc.decodeAudioData(e,function(e){return t(e)},r):this.offlineAc.decodeAudioData(e).then(function(e){return t(e)}).catch(function(e){return r(e)})}},{key:"setPeaks",value:function(e,t){null!=t&&(this.explicitDuration=t),this.peaks=e}},{key:"setLength",value:function(e){if(!this.mergedPeaks||e!=2*this.mergedPeaks.length-1+2){this.splitPeaks=[],this.mergedPeaks=[];var t,r=this.buffer?this.buffer.numberOfChannels:1;for(t=0;t<r;t++)this.splitPeaks[t]=[],this.splitPeaks[t][2*(e-1)]=0,this.splitPeaks[t][2*(e-1)+1]=0;this.mergedPeaks[2*(e-1)]=0,this.mergedPeaks[2*(e-1)+1]=0}}},{key:"getPeaks",value:function(e,t,r){if(this.peaks)return this.peaks;if(!this.buffer)return[];if(t=t||0,r=r||e-1,this.setLength(e),!this.buffer)return this.params.splitChannels?this.splitPeaks:this.mergedPeaks;if(!this.buffer.length){var n=this.createBuffer(1,4096,this.sampleRate);this.buffer=n.buffer}var i,a=this.buffer.length/e,s=~~(a/10)||1,o=this.buffer.numberOfChannels;for(i=0;i<o;i++){var u=this.splitPeaks[i],l=this.buffer.getChannelData(i),c=void 0;for(c=t;c<=r;c++){var h=~~(c*a),d=~~(h+a),f=l[h],p=f,v=void 0;for(v=h;v<d;v+=s){var m=l[v];m>p&&(p=m),m<f&&(f=m)}u[2*c]=p,u[2*c+1]=f,(0==i||p>this.mergedPeaks[2*c])&&(this.mergedPeaks[2*c]=p),(0==i||f<this.mergedPeaks[2*c+1])&&(this.mergedPeaks[2*c+1]=f)}}return this.params.splitChannels?this.splitPeaks:this.mergedPeaks}},{key:"getPlayedPercents",value:function(){return this.state.getPlayedPercents.call(this)}},{key:"disconnectSource",value:function(){this.source&&this.source.disconnect()}},{key:"destroyWebAudio",value:function(){this.disconnectFilters(),this.disconnectSource(),this.gainNode.disconnect(),this.scriptNode.disconnect(),this.analyser.disconnect(),this.params.closeAudioContext&&("function"==typeof this.ac.close&&"closed"!=this.ac.state&&this.ac.close(),this.ac=null,this.params.audioContext?this.params.audioContext=null:window.WaveSurferAudioContext=null,window.WaveSurferOfflineAudioContext=null)}},{key:"destroy",value:function(){this.isPaused()||this.pause(),this.unAll(),this.buffer=null,this.destroyed=!0,this.destroyWebAudio()}},{key:"load",value:function(e){this.startPosition=0,this.lastPlay=this.ac.currentTime,this.buffer=e,this.createSource()}},{key:"createSource",value:function(){this.disconnectSource(),this.source=this.ac.createBufferSource(),this.source.start=this.source.start||this.source.noteGrainOn,this.source.stop=this.source.stop||this.source.noteOff,this.setPlaybackRate(this.playbackRate),this.source.buffer=this.buffer,this.source.connect(this.analyser)}},{key:"resumeAudioContext",value:function(){"suspended"==this.ac.state&&this.ac.resume&&this.ac.resume()}},{key:"isPaused",value:function(){return this.state!==this.states[g]}},{key:"getDuration",value:function(){return this.explicitDuration?this.explicitDuration:this.buffer?this.buffer.duration:0}},{key:"seekTo",value:function(e,t){if(this.buffer)return this.scheduledPause=null,null==e&&(e=this.getCurrentTime())>=this.getDuration()&&(e=0),null==t&&(t=this.getDuration()),this.startPosition=e,this.lastPlay=this.ac.currentTime,this.state===this.states[w]&&this.setState(b),{start:e,end:t}}},{key:"getPlayedTime",value:function(){return(this.ac.currentTime-this.lastPlay)*this.playbackRate}},{key:"play",value:function(e,t){if(this.buffer){this.createSource();var r=this.seekTo(e,t);e=r.start,t=r.end,this.scheduledPause=t,this.source.start(0,e),this.resumeAudioContext(),this.setState(g),this.fireEvent("play")}}},{key:"pause",value:function(){this.scheduledPause=null,this.startPosition+=this.getPlayedTime(),this.source&&this.source.stop(0),this.setState(b),this.fireEvent("pause")}},{key:"getCurrentTime",value:function(){return this.state.getCurrentTime.call(this)}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"setPlaybackRate",value:function(e){this.playbackRate=e||1,this.source&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.ac.currentTime)}},{key:"setPlayEnd",value:function(e){this.scheduledPause=e}}]),t}(y.Observer);t.default=k,k.scriptBufferSize=256,e.exports=t.default},"./node_modules/debounce/index.js":/*!****************************************!*\
          !*** ./node_modules/debounce/index.js ***!
          \****************************************/
function(e){function t(e,t,r){function n(){var l=Date.now()-o;l<t&&l>=0?i=setTimeout(n,t-l):(i=null,r||(u=e.apply(s,a),s=a=null))}var i,a,s,o,u;null==t&&(t=100);var l=function(){s=this,a=arguments,o=Date.now();var l=r&&!i;return i||(i=setTimeout(n,t)),l&&(u=e.apply(s,a),s=a=null),u};return l.clear=function(){i&&(clearTimeout(i),i=null)},l.flush=function(){i&&(u=e.apply(s,a),s=a=null,clearTimeout(i),i=null)},l}t.debounce=t,e.exports=t}},r={};return e("./src/wavesurfer.js")}()})}).call(t,r(0)(e))},function(e,t,r){"use strict";(function(e){var r,n,i,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};/*!
 * wavesurfer.js cursor plugin 5.1.0 (2021-06-20)
 * https://wavesurfer-js.org
 * @license BSD-3-Clause
 */
!function(a,o){"object"===s(t)&&"object"===s(e)?e.exports=o():(n=[],r=o,void 0!==(i="function"==typeof r?r.apply(t,n):r)&&(e.exports=i))}(0,function(){return function(){function e(n){var i=r[n];if(void 0!==i)return i.exports;var a=r[n]={exports:{}};return t[n](a,a.exports,e),a.exports}var t={"./src/plugin/cursor/index.js":/*!************************************!*\
          !*** ./src/plugin/cursor/index.js ***!
          \************************************/
function(e,t){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(){function e(t,n){var i=this;r(this,e),this.defaultParams={hideOnBlur:!0,width:"1px",color:"black",opacity:"0.25",style:"solid",zIndex:4,customStyle:{},customShowTimeStyle:{},showTime:!1,followCursorY:!1,formatTimeCallback:null},this._onMousemove=function(e){var t=i.wavesurfer.container.getBoundingClientRect(),r=0,n=e.clientX-t.left,a=t.right<e.clientX+i.outerWidth(i.displayTime);i.params.showTime&&i.params.followCursorY&&(r=e.clientY-(t.top+t.height/2)),i.updateCursorPosition(n,r,a)},this._onMouseenter=function(){return i.showCursor()},this._onMouseleave=function(){return i.hideCursor()},this.wavesurfer=n,this.style=n.util.style,this.cursor=null,this.showTime=null,this.displayTime=null,this.params=a({},this.defaultParams,t)}return i(e,[{key:"init",value:function(){this.wrapper=this.wavesurfer.container,this.cursor=this.wrapper.appendChild(this.style(document.createElement("cursor"),a({position:"absolute",zIndex:this.params.zIndex,left:0,top:0,bottom:0,width:"0",display:"flex",borderRightStyle:this.params.style,borderRightWidth:this.params.width,borderRightColor:this.params.color,opacity:this.params.opacity,pointerEvents:"none"},this.params.customStyle))),this.params.showTime&&(this.showTime=this.wrapper.appendChild(this.style(document.createElement("showTitle"),a({position:"absolute",zIndex:this.params.zIndex,left:0,top:0,bottom:0,width:"auto",display:"flex",opacity:this.params.opacity,pointerEvents:"none",height:"100%"},this.params.customStyle))),this.displayTime=this.showTime.appendChild(this.style(document.createElement("div"),a({display:"inline",pointerEvents:"none",margin:"auto",visibility:"hidden"},this.params.customShowTimeStyle))),this.displayTime.innerHTML=this.formatTime(0)),this.wrapper.addEventListener("mousemove",this._onMousemove),this.params.hideOnBlur&&(this.hideCursor(),this.wrapper.addEventListener("mouseenter",this._onMouseenter),this.wrapper.addEventListener("mouseleave",this._onMouseleave))}},{key:"destroy",value:function(){this.params.showTime&&this.cursor.parentNode.removeChild(this.showTime),this.cursor.parentNode.removeChild(this.cursor),this.wrapper.removeEventListener("mousemove",this._onMousemove),this.params.hideOnBlur&&(this.wrapper.removeEventListener("mouseenter",this._onMouseenter),this.wrapper.removeEventListener("mouseleave",this._onMouseleave))}},{key:"updateCursorPosition",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.style(this.cursor,{left:"".concat(e,"px")}),this.params.showTime){var n=this.wavesurfer.getDuration(),i=this.wavesurfer.drawer.width/this.wavesurfer.params.pixelRatio,a=this.wavesurfer.drawer.getScrollX(),s=n/this.wavesurfer.drawer.width*a,o=Math.max(0,e/i*n)+s,u=this.formatTime(o);if(r){e-=this.outerWidth(this.displayTime)}this.style(this.showTime,{left:"".concat(e,"px"),top:"".concat(t,"px")}),this.style(this.displayTime,{visibility:"visible"}),this.displayTime.innerHTML="".concat(u)}}},{key:"showCursor",value:function(){this.style(this.cursor,{display:"flex"}),this.params.showTime&&this.style(this.showTime,{display:"flex"})}},{key:"hideCursor",value:function(){this.style(this.cursor,{display:"none"}),this.params.showTime&&this.style(this.showTime,{display:"none"})}},{key:"formatTime",value:function(e){return e=isNaN(e)?0:e,this.params.formatTimeCallback?this.params.formatTimeCallback(e):[e].map(function(e){return[Math.floor(e%3600/60),("00"+Math.floor(e%60)).slice(-2),("000"+Math.floor(e%1*1e3)).slice(-3)].join(":")})}},{key:"outerWidth",value:function(e){if(!e)return 0;var t=e.offsetWidth,r=getComputedStyle(e);return t+=parseInt(r.marginLeft+r.marginRight)}}],[{key:"create",value:function(t){return{name:"cursor",deferInit:!(!t||!t.deferInit)&&t.deferInit,params:t,staticProps:{},instance:e}}}]),e}();t.default=s,e.exports=t.default}},r={};return e("./src/plugin/cursor/index.js")}()})}).call(t,r(0)(e))},function(e,t,r){"use strict";(function(e){var r,n,i,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};/*!
 * wavesurfer.js regions plugin 5.1.0 (2021-06-20)
 * https://wavesurfer-js.org
 * @license BSD-3-Clause
 */
!function(a,o){"object"===s(t)&&"object"===s(e)?e.exports=o():(n=[],r=o,void 0!==(i="function"==typeof r?r.apply(t,n):r)&&(e.exports=i))}(0,function(){return function(){function e(n){var i=r[n];if(void 0!==i)return i.exports;var a=r[n]={exports:{}};return t[n](a,a.exports,e),a.exports}var t={"./src/plugin/regions/index.js":/*!*************************************!*\
          !*** ./src/plugin/regions/index.js ***!
          \*************************************/
function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach(function(t){a(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(/*! ./region.js */"./src/plugin/regions/region.js"),c=function(){function e(t,r){var n=this;s(this,e),this.params=t,this.wavesurfer=r,this.util=i(i({},r.util),{},{getRegionSnapToGridValue:function(e){return n.getRegionSnapToGridValue(e,t)}}),this.maxRegions=t.maxRegions,this.regionsMinLength=t.regionsMinLength||null,Object.getOwnPropertyNames(this.util.Observer.prototype).forEach(function(e){l.Region.prototype[e]=n.util.Observer.prototype[e]}),this.wavesurfer.Region=l.Region;this._onBackendCreated=function(){n.wrapper=n.wavesurfer.drawer.wrapper,n.orientation=n.wavesurfer.drawer.orientation,n.params.regions&&n.params.regions.forEach(function(e){e.edgeScrollWidth=n.params.edgeScrollWidth||.05*n.wrapper.clientWidth,n.add(e)})},this.list={},this._onReady=function(){n.wrapper=n.wavesurfer.drawer.wrapper,n.vertical=n.wavesurfer.drawer.params.vertical,n.params.dragSelection&&n.enableDragSelection(n.params),Object.keys(n.list).forEach(function(e){n.list[e].updateRender()})}}return u(e,[{key:"init",value:function(){this.wavesurfer.isReady?(this._onBackendCreated(),this._onReady()):(this.wavesurfer.once("ready",this._onReady),this.wavesurfer.once("backend-created",this._onBackendCreated))}},{key:"destroy",value:function(){this.wavesurfer.un("ready",this._onReady),this.wavesurfer.un("backend-created",this._onBackendCreated),this.disableDragSelection(),this.clear()}},{key:"wouldExceedMaxRegions",value:function(){return this.maxRegions&&Object.keys(this.list).length>=this.maxRegions}},{key:"add",value:function(e){var t=this;if(this.wouldExceedMaxRegions())return null;!e.minLength&&this.regionsMinLength&&(e=i(i({},e),{},{minLength:this.regionsMinLength}));var r=new this.wavesurfer.Region(e,this.util,this.wavesurfer);return this.list[r.id]=r,r.on("remove",function(){delete t.list[r.id]}),r}},{key:"clear",value:function(){var e=this;Object.keys(this.list).forEach(function(t){e.list[t].remove()})}},{key:"enableDragSelection",value:function(e){var t=this;this.disableDragSelection();var r,n,i,a,s,o,u,l=e.slop||2,c=this.wavesurfer.drawer.container,h=!1!==e.scroll&&this.wavesurfer.params.scrollParent,d=e.scrollSpeed||1,f=e.scrollThreshold||10,p=this.wavesurfer.getDuration(),v=0,m=function e(r){if(a&&o){var s=t.wrapper.scrollLeft+d*o;t.wrapper.scrollLeft=s=Math.min(n,Math.max(0,s));var u=t.wavesurfer.drawer.handleEvent(r);a.update({start:Math.min(u*p,i*p),end:Math.max(u*p,i*p)}),s<n&&s>0&&window.requestAnimationFrame(function(){e(r)})}},y=function(e){e.touches&&e.touches.length>1||(p=t.wavesurfer.getDuration(),s=e.targetTouches?e.targetTouches[0].identifier:null,n=t.wrapper.scrollWidth-t.wrapper.clientWidth,u=t.util.withOrientation(t.wrapper.getBoundingClientRect(),t.vertical),r=!0,i=t.wavesurfer.drawer.handleEvent(e,!0),a=null,o=null)};this.wrapper.addEventListener("mousedown",y),this.wrapper.addEventListener("touchstart",y),this.on("disable-drag-selection",function(){t.wrapper.removeEventListener("touchstart",y),t.wrapper.removeEventListener("mousedown",y)});var g=function(e){e.touches&&e.touches.length>1||(r=!1,v=0,o=null,a&&(t.util.preventClick(),a.fireEvent("update-end",e),t.wavesurfer.fireEvent("region-update-end",a,e)),a=null)};this.wrapper.addEventListener("mouseleave",g),this.wrapper.addEventListener("mouseup",g),this.wrapper.addEventListener("touchend",g),document.body.addEventListener("mouseup",g),document.body.addEventListener("touchend",g),this.on("disable-drag-selection",function(){document.body.removeEventListener("mouseup",g),document.body.removeEventListener("touchend",g),t.wrapper.removeEventListener("touchend",g),t.wrapper.removeEventListener("mouseup",g),t.wrapper.removeEventListener("mouseleave",g)});var b=function(n){if(r&&!(++v<=l)&&!(n.touches&&n.touches.length>1)&&(!n.targetTouches||n.targetTouches[0].identifier==s)&&(a||(a=t.add(e||{})))){var d=t.wavesurfer.drawer.handleEvent(n),y=t.wavesurfer.regions.util.getRegionSnapToGridValue(i*p),g=t.wavesurfer.regions.util.getRegionSnapToGridValue(d*p);a.update({start:Math.min(g,y),end:Math.max(g,y)});var b=t.util.withOrientation(n,t.vertical);if(h&&c.clientWidth<t.wrapper.scrollWidth){var w=b.clientX-u.left;o=w<=f?-1:w>=u.right-f?1:null,o&&m(n)}}};this.wrapper.addEventListener("mousemove",b),this.wrapper.addEventListener("touchmove",b),this.on("disable-drag-selection",function(){t.wrapper.removeEventListener("touchmove",b),t.wrapper.removeEventListener("mousemove",b)}),this.wavesurfer.on("region-created",function(e){t.regionsMinLength&&(e.minLength=t.regionsMinLength)})}},{key:"disableDragSelection",value:function(){this.fireEvent("disable-drag-selection")}},{key:"getCurrentRegion",value:function(){var e=this,t=this.wavesurfer.getCurrentTime(),r=null;return Object.keys(this.list).forEach(function(n){var i=e.list[n];i.start<=t&&i.end>=t&&(!r||i.end-i.start<r.end-r.start)&&(r=i)}),r}},{key:"getRegionSnapToGridValue",value:function(e,t){if(t.snapToGridInterval){var r=t.snapToGridOffset||0;return Math.round((e-r)/t.snapToGridInterval)*t.snapToGridInterval+r}return e}}],[{key:"create",value:function(t){return{name:"regions",deferInit:!(!t||!t.deferInit)&&t.deferInit,params:t,staticProps:{addRegion:function(e){return this.initialisedPluginList.regions||this.initPlugin("regions"),this.regions.add(e)},clearRegions:function(){this.regions&&this.regions.clear()},enableDragSelection:function(e){this.initialisedPluginList.regions||this.initPlugin("regions"),this.regions.enableDragSelection(e)},disableDragSelection:function(){this.regions.disableDragSelection()}},instance:e}}}]),e}();t.default=c,e.exports=t.default},"./src/plugin/regions/region.js":/*!**************************************!*\
          !*** ./src/plugin/regions/region.js ***!
          \**************************************/
function(e,t){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}Object.defineProperty(t,"__esModule",{value:!0}),t.Region=void 0;var s=function(){function e(t,n,i){var a,s=this;r(this,e),this.wavesurfer=i,this.wrapper=i.drawer.wrapper,this.util=i.util,this.style=this.util.style,this.regionsUtil=n,this.vertical=i.drawer.params.vertical,this.id=null==t.id?i.util.getId():t.id,this.start=Number(t.start)||0,this.end=null==t.end?this.start+4/this.wrapper.scrollWidth*this.wavesurfer.getDuration():Number(t.end),this.resize=void 0===t.resize||Boolean(t.resize),this.drag=void 0===t.drag||Boolean(t.drag),this.isResizing=!1,this.isDragging=!1,this.loop=Boolean(t.loop),this.color=t.color||"rgba(0, 0, 0, 0.1)",this.handleStyle=t.handleStyle||{left:{},right:{}},this.handleLeftEl=null,this.handleRightEl=null,this.data=t.data||{},this.attributes=t.attributes||{},this.showTooltip=null===(a=t.showTooltip)||void 0===a||a,this.maxLength=t.maxLength,this.minLength=t.minLength,this._onRedraw=function(){return s.updateRender()},this.scroll=!1!==t.scroll&&i.params.scrollParent,this.scrollSpeed=t.scrollSpeed||1,this.scrollThreshold=t.scrollThreshold||10,this.preventContextMenu=void 0!==t.preventContextMenu&&Boolean(t.preventContextMenu);var o=null==t.channelIdx?-1:parseInt(t.channelIdx);if(this.regionHeight="100%",this.marginTop="0px",-1!==o){var u=null!=this.wavesurfer.backend.buffer?this.wavesurfer.backend.buffer.numberOfChannels:-1;u>=0&&o<u&&(this.regionHeight=Math.floor(1/u*100)+"%",this.marginTop=this.wavesurfer.getHeight()*o+"px")}this.formatTimeCallback=t.formatTimeCallback,this.edgeScrollWidth=t.edgeScrollWidth,this.bindInOut(),this.render(),this.wavesurfer.on("zoom",this._onRedraw),this.wavesurfer.on("redraw",this._onRedraw),this.wavesurfer.fireEvent("region-created",this)}return i(e,[{key:"update",value:function(e){null!=e.start&&(this.start=Number(e.start)),null!=e.end&&(this.end=Number(e.end)),null!=e.loop&&(this.loop=Boolean(e.loop)),null!=e.color&&(this.color=e.color),null!=e.handleStyle&&(this.handleStyle=e.handleStyle),null!=e.data&&(this.data=e.data),null!=e.resize&&(this.resize=Boolean(e.resize),this.updateHandlesResize(this.resize)),null!=e.drag&&(this.drag=Boolean(e.drag)),null!=e.maxLength&&(this.maxLength=Number(e.maxLength)),null!=e.minLength&&(this.minLength=Number(e.minLength)),null!=e.attributes&&(this.attributes=e.attributes),this.updateRender(),this.fireEvent("update"),this.wavesurfer.fireEvent("region-updated",this)}},{key:"remove",value:function(){this.element&&(this.wrapper.removeChild(this.element.domElement),this.element=null,this.fireEvent("remove"),this.wavesurfer.un("zoom",this._onRedraw),this.wavesurfer.un("redraw",this._onRedraw),this.wavesurfer.fireEvent("region-removed",this))}},{key:"play",value:function(e){var t=e||this.start;this.wavesurfer.play(t,this.end),this.fireEvent("play"),this.wavesurfer.fireEvent("region-play",this)}},{key:"playLoop",value:function(e){this.loop=!0,this.play(e)}},{key:"setLoop",value:function(e){this.loop=e}},{key:"render",value:function(){this.element=this.util.withOrientation(this.wrapper.appendChild(document.createElement("region")),this.vertical),this.element.className="wavesurfer-region",this.showTooltip&&(this.element.title=this.formatTime(this.start,this.end)),this.element.setAttribute("data-id",this.id);for(var e in this.attributes)this.element.setAttribute("data-region-"+e,this.attributes[e]);if(this.style(this.element,{position:"absolute",zIndex:2,height:this.regionHeight,top:this.marginTop}),this.resize){this.handleLeftEl=this.util.withOrientation(this.element.appendChild(document.createElement("handle")),this.vertical),this.handleRightEl=this.util.withOrientation(this.element.appendChild(document.createElement("handle")),this.vertical),this.handleLeftEl.className="wavesurfer-handle wavesurfer-handle-start",this.handleRightEl.className="wavesurfer-handle wavesurfer-handle-end";var t={cursor:this.vertical?"row-resize":"col-resize",position:"absolute",top:"0px",width:"2px",height:"100%",backgroundColor:"rgba(0, 0, 0, 1)"},r="none"!==this.handleStyle.left?a({left:"0px"},t,this.handleStyle.left):null,n="none"!==this.handleStyle.right?a({right:"0px"},t,this.handleStyle.right):null;r&&this.style(this.handleLeftEl,r),n&&this.style(this.handleRightEl,n)}this.updateRender(),this.bindEvents()}},{key:"formatTime",value:function(e,t){return this.formatTimeCallback?this.formatTimeCallback(e,t):(e==t?[e]:[e,t]).map(function(e){return[Math.floor(e%3600/60),("00"+Math.floor(e%60)).slice(-2)].join(":")}).join("-")}},{key:"getWidth",value:function(){return this.wavesurfer.drawer.width/this.wavesurfer.params.pixelRatio}},{key:"updateRender",value:function(){var e=this.wavesurfer.getDuration(),t=this.getWidth(),r=this.start,n=this.end;if(r<0&&(r=0,n-=r),n>e&&(n=e,r=e-(n-r)),null!=this.minLength&&(n=Math.max(r+this.minLength,n)),null!=this.maxLength&&(n=Math.min(r+this.maxLength,n)),null!=this.element){var i=Math.round(r/e*t),a=Math.round(n/e*t)-i;this.style(this.element,{left:i+"px",width:a+"px",backgroundColor:this.color,cursor:this.drag?"move":"default"});for(var s in this.attributes)this.element.setAttribute("data-region-"+s,this.attributes[s]);this.showTooltip&&(this.element.title=this.formatTime(this.start,this.end))}}},{key:"bindInOut",value:function(){var e=this;this.firedIn=!1,this.firedOut=!1;var t=function(t){var r=Math.round(10*e.start)/10,n=Math.round(10*e.end)/10;t=Math.round(10*t)/10,!e.firedOut&&e.firedIn&&(r>t||n<=t)&&(e.firedOut=!0,e.firedIn=!1,e.fireEvent("out"),e.wavesurfer.fireEvent("region-out",e)),!e.firedIn&&r<=t&&n>t&&(e.firedIn=!0,e.firedOut=!1,e.fireEvent("in"),e.wavesurfer.fireEvent("region-in",e))};this.wavesurfer.backend.on("audioprocess",t),this.on("remove",function(){e.wavesurfer.backend.un("audioprocess",t)}),this.on("out",function(){if(e.loop){var t=e.wavesurfer.getCurrentTime();t>=e.start&&t<=e.end&&e.wavesurfer.play(e.start)}})}},{key:"bindEvents",value:function(){var e=this,t=this.preventContextMenu;this.element.addEventListener("mouseenter",function(t){e.fireEvent("mouseenter",t),e.wavesurfer.fireEvent("region-mouseenter",e,t)}),this.element.addEventListener("mouseleave",function(t){e.fireEvent("mouseleave",t),e.wavesurfer.fireEvent("region-mouseleave",e,t)}),this.element.addEventListener("click",function(t){t.preventDefault(),e.fireEvent("click",t),e.wavesurfer.fireEvent("region-click",e,t)}),this.element.addEventListener("dblclick",function(t){t.stopPropagation(),t.preventDefault(),e.fireEvent("dblclick",t),e.wavesurfer.fireEvent("region-dblclick",e,t)}),this.element.addEventListener("contextmenu",function(r){t&&r.preventDefault(),e.fireEvent("contextmenu",r),e.wavesurfer.fireEvent("region-contextmenu",e,r)}),(this.drag||this.resize)&&this.bindDragEvents()}},{key:"bindDragEvents",value:function(){var e,t,r,n,i,a,s,o,u,l=this,c=this.wavesurfer.drawer.container,h=this.scrollSpeed,d=(this.scrollThreshold,!1),f=function t(c){var d=l.util.withOrientation(c,l.vertical),f=l.wavesurfer.getDuration();if(a&&(r||i)){var p=d.clientX,v=0,m=0,y=0,g=l.regionsUtil.getRegionSnapToGridValue(l.wavesurfer.drawer.handleEvent(c)*f);if(r)-1===a?(m=o*l.wavesurfer.params.minPxPerSec,v=p-s.left):(m=u*l.wavesurfer.params.minPxPerSec,v=s.right-p);else{var b=l.minLength;b||(b=0),"start"===i?(g>l.end-b&&(g=l.end-b,y=h*a),g<0&&(g=0)):"end"===i&&(g<l.start+b&&(g=l.start+b,y=h*a),g>f&&(g=f))}var w=l.wrapper.scrollLeft;if(-1===a){if(0===Math.round(w))return;if(Math.round(w-m+v)<=0)return}else{if(Math.round(w)===n)return;if(Math.round(w+m-v)>=n)return}var k=w-y+h*a;if(-1===a){var P=Math.max(0+m-v,k);l.wrapper.scrollLeft=k=P}else{var x=Math.min(n-m+v,k);l.wrapper.scrollLeft=k=x}var E=g-e;e=g,r?l.onDrag(E):l.onResize(E,i),window.requestAnimationFrame(function(){t(c)})}},p=function(a){var c=l.wavesurfer.getDuration();a.touches&&a.touches.length>1||(t=a.targetTouches?a.targetTouches[0].identifier:null,(l.drag||l.resize)&&a.stopPropagation(),e=l.regionsUtil.getRegionSnapToGridValue(l.wavesurfer.drawer.handleEvent(a,!0)*c),o=e-l.start,u=l.end-e,n=l.wrapper.scrollWidth-l.wrapper.clientWidth,s=l.util.withOrientation(l.wrapper.getBoundingClientRect(),l.vertical),l.isResizing=!1,l.isDragging=!1,"handle"===a.target.tagName.toLowerCase()?(l.isResizing=!0,i=a.target.classList.contains("wavesurfer-handle-start")?"start":"end"):(l.isDragging=!0,r=!0,i=!1))},v=function(e){e.touches&&e.touches.length>1||((r||i)&&(l.isDragging=!1,l.isResizing=!1,r=!1,a=null,i=!1),d&&(d=!1,l.util.preventClick(),l.fireEvent("update-end",e),l.wavesurfer.fireEvent("region-update-end",l,e)))},m=function(n){var h=l.wavesurfer.getDuration(),p=l.util.withOrientation(n,l.vertical);if(!(n.touches&&n.touches.length>1)&&(!n.targetTouches||n.targetTouches[0].identifier==t)&&(r||i)){var v=l.regionsUtil.getRegionSnapToGridValue(l.wavesurfer.drawer.handleEvent(n)*h);if(r){var m=l.wavesurfer.getDuration();v>m-u&&(v=m-u),v-o<0&&(v=o)}if(i){var y=l.minLength;y||(y=0),"start"===i?(v>l.end-y&&(v=l.end-y),v<0&&(v=0)):"end"===i&&(v<l.start+y&&(v=l.start+y),v>h&&(v=h))}var g=v-e;if(e=v,l.drag&&r&&(d=d||!!g,l.onDrag(g)),l.resize&&i&&(d=d||!!g,l.onResize(g,i)),l.scroll&&c.clientWidth<l.wrapper.scrollWidth){var b=p.clientX;a=b<s.left+l.edgeScrollWidth?-1:b>s.right-l.edgeScrollWidth?1:null,a&&f(n)}}};this.element.addEventListener("mousedown",p),this.element.addEventListener("touchstart",p),document.body.addEventListener("mousemove",m),document.body.addEventListener("touchmove",m,{passive:!1}),document.addEventListener("mouseup",v),document.body.addEventListener("touchend",v),this.on("remove",function(){document.removeEventListener("mouseup",v),document.body.removeEventListener("touchend",v),document.body.removeEventListener("mousemove",m),document.body.removeEventListener("touchmove",m)}),this.wavesurfer.on("destroy",function(){document.removeEventListener("mouseup",v),document.body.removeEventListener("touchend",v)})}},{key:"onDrag",value:function(e){var t=this.wavesurfer.getDuration();this.end+e>t&&(e=t-this.end),this.start+e<0&&(e=-1*this.start),this.update({start:this.start+e,end:this.end+e})}},{key:"onResize",value:function(e,t){var r=this.wavesurfer.getDuration();"start"===t?(e>0&&this.end-(this.start+e)<this.minLength&&(e=this.end-this.minLength-this.start),e<0&&this.start+e<0&&(e=-1*this.start),this.update({start:Math.min(this.start+e,this.end),end:Math.max(this.start+e,this.end)})):(e<0&&this.end+e-this.start<this.minLength&&(e=this.start+this.minLength-this.end),e>0&&this.end+e>r&&(e=r-this.end),this.update({start:Math.min(this.end+e,this.start),end:Math.max(this.end+e,this.start)}))}},{key:"updateHandlesResize",value:function(e){var t;t=e?this.vertical?"row-resize":"col-resize":"auto",this.handleLeftEl&&this.style(this.handleLeftEl,{cursor:t}),this.handleRightEl&&this.style(this.handleRightEl,{cursor:t})}}]),e}();t.Region=s}},r={};return e("./src/plugin/regions/index.js")}()})}).call(t,r(0)(e))}]);